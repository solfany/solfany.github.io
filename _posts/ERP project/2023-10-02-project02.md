---
title: "[ERP project] ê·¼íƒœê´€ë¦¬ í˜ì´ì§€"
categories:
  - Erp
tags: [ERP project]
toc_sticky: true
toc_label: "ëª©ë¡"
toc_icon: "bars"
---

# ê·¼íƒœ ê´€ë¦¬ í˜ì´ì§€

![image](https://github.com/solfany/solfany.github.io/assets/123814718/e7d22756-d117-4b8c-b9a5-4ee63bcdb13e)

# ì™€ì´ì–´í”„ë ˆì„

![Alt text](image.png)

# ìœ ìŠ¤ì¼€ì´ìŠ¤

![Alt text](image-1.png)

# Front-end

<aside>
ğŸ“ ì´ ì½”ë“œëŠ” Reactë¡œ ì‘ì„±ëœ ì»´í¬ë„ŒíŠ¸ì¸ **`TimeManagementSystem`** ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ ì½”ë“œì´ë‹¤. í•´ë‹¹  ì»´í¬ë„ŒíŠ¸ëŠ” ê·¼íƒœ ê´€ë¦¬ ì‹œìŠ¤í…œì„ í‘œì‹œí•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.

ì´ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ì£¼ìš” ê¸°ëŠ¥ì„ ê°„ëµí•˜ê²Œ ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. ğŸ‘‡ğŸ»

### 1. ë°ì´í„° ê°€ì ¸ì˜¤ê¸°ì™€ í‘œì‹œ:

- **`useEffect`**ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë Œë”ë§ë  ë•Œ ë° íŠ¹ì • ìƒíƒœ(state)ê°€ ë³€ê²½ë  ë•Œ ì„œë²„ì—ì„œ ê·¼íƒœ ê´€ë¦¬ ë°ì´í„°ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì˜¨ë‹¤. ì´ ë°ì´í„°ëŠ” **`users`** ìƒíƒœì— ì €ì¥ëœë‹¤.
- ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ í…Œì´ë¸” í˜•íƒœë¡œ í™”ë©´ì— í‘œì‹œí•œë‹¤.
  ì´ë•Œ, í˜ì´ì§• ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ í•œ í˜ì´ì§€ì— ì¼ì •í•œ ê°œìˆ˜ì˜ í•­ëª©ì„ í‘œì‹œí•˜ê³  í˜ì´ì§€ë¥¼ ì „í™˜í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

### 2. ê²€ìƒ‰ ë° ì •ë ¬:

- ì‚¬ìš©ìëŠ” ì§ì› ì´ë¦„, ë¶€ì„œ ì´ë¦„, ì‚¬ì› ë²ˆí˜¸ë¡œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤. ê²€ìƒ‰ì–´ê°€ ì…ë ¥ë  ë•Œë§ˆë‹¤ í•´ë‹¹ ê²€ìƒ‰ì–´ì™€ ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ë§Œ í‘œì‹œëœë‹¤.
- ì‚¬ìš©ìëŠ” ê° ì—´ì˜ í—¤ë”ë¥¼ í´ë¦­í•˜ì—¬ ì •ë ¬í•  ìˆ˜ ìˆë‹¤. ì—´ í—¤ë” í´ë¦­ ì‹œ í•´ë‹¹ ì—´ì„ ì˜¤ë¦„ì°¨ìˆœ ë° ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•  ìˆ˜ ìˆë‹¤.

### 3. ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ë° ì²´í¬ë°•ìŠ¤ ì„ íƒ:

- ì‚¬ìš©ìëŠ” í…Œì´ë¸” ìƒì˜ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•˜ì—¬ íŠ¹ì • í•­ëª©ì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤.
- ì„ íƒëœ í•­ëª©ì— ëŒ€í•œ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ ì œê³µí•˜ë©°, ì„ íƒëœ í•­ëª©ì— ëŒ€í•œ ì—‘ì…€ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆë‹¤.
- ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œ ì„ íƒëœ í•­ëª©ì˜ ë°ì´í„°ë¥¼ ì—‘ì…€ ì–‘ì‹ì— ë§ê²Œ ê°€ê³µí•˜ê³  ë‹¤ìš´ë¡œë“œí•œë‹¤.

**_ì´ë ‡ê²Œ í¬ê²Œ ì„¸ ê°€ì§€ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì§„ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆëŠ” `TimeManagementSystem` ì»´í¬ë„ŒíŠ¸ëŠ”
ê·¼íƒœ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ ë°ì´í„° ì¡°íšŒ, ê²€ìƒ‰, ì •ë ¬, ì—‘ì…€ ë‹¤ìš´ë¡œë“œ, í•­ëª© ì„ íƒ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤_.**

</aside>

## 1. ì„œë²„ì—ì„œ ë°ì´í„° ë°›ì•„ì˜¤ê¸°

---

```jsx
// ì„œë²„ì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
useEffect(() => {
  // fetch("/api/timeManagement")ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
  fetch("/api/timeManagement")
    .then((response) => response.json())
    .then((data) => {
      // ë°ì´í„°ë¥¼ ë°›ì•„ì™€ì„œ setUsers í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ users ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
      setUsers(data);
      console.log(data);
    });
}, []); // ë¹ˆ ë°°ì—´ì„ ë‘ ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬í•˜ì—¬ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.
```

> Reactì—ì„œ ì‚¬ìš©ë˜ëŠ” **`useEffect`** í›…ì„ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ê°€ê³µí•œë‹¤.
>
> 1. **`useEffect`** í›…ì„ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë Œë”ë§ë  ë•Œ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•œë‹¤.
> 2. **`fetch`** í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì˜ **`/api/timeManagement`** ì—”ë“œí¬ì¸íŠ¸ë¡œ HTTP GET ìš”ì²­ì„ ë³´ë‚¸ë‹¤ â†’ í•´ë‹¹ ìš”ì²­ì€ ì„œë²„ì—ì„œ ê·¼íƒœ ê´€ë¦¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ìš”ì²­ì´ë‹¤.
> 3. ì„œë²„ì—ì„œ ì‘ë‹µì„ ë°›ìœ¼ë©´ **`.then`** ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ JSON í˜•ì‹ìœ¼ë¡œ íŒŒì‹±í•˜ê³ ,
>    íŒŒì‹±ëœ ë°ì´í„°ë¥¼ **`setUsers`** í•¨ìˆ˜ë¥¼ í†µí•´ **`users`** ìƒíƒœì— ì—…ë°ì´íŠ¸í•œë‹¤.
> 4. **`console.log(data)`**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆëŠ”ì§€ ì½˜ì†”ì— ê¸°ë¡í•œë‹¤.

## 2. TimeManagementSystem ê¸°ëŠ¥ ì„¤ëª…

### 2-1. í˜ì´ì§• ê¸°ëŠ¥

1. **useStateë¥¼ ì´ìš©í•œ ìƒíƒœ ê´€ë¦¬**:

   ```jsx
   const [currentPage, setCurrentPage] = useState(1);
   ```

   - **`currentPage`**: í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìƒíƒœ ë³€ìˆ˜ì´ë‹¤. ê¸°ë³¸ê°’ìœ¼ë¡œ 1ì„ ì„¤ì •í•œë‹¤.

2. **itemsPerPage ìƒìˆ˜ ì •ì˜**:

   ```jsx
   const itemsPerPage = 10;
   ```

   - **`itemsPerPage`**: í•œ í˜ì´ì§€ì— í‘œì‹œí•  ì•„ì´í…œ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìƒìˆ˜ì´ë‹¤.
     10ê°œì˜ í•­ëª©ì´ í•œ í˜ì´ì§€ì— í‘œì‹œë˜ë„ë¡ ì„¤ì •í•´ì£¼ì—ˆë‹¤.

3. **handlePageChange ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬**:

   ```jsx
   const handlePageChange = (page) => {
     setCurrentPage(page);
   };
   ```

   - **`handlePageChange`** í•¨ìˆ˜ëŠ” í˜ì´ì§€ ë³€ê²½ì„ ì²˜ë¦¬í•˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì´ë‹¤.
   - ì‚¬ìš©ìê°€ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ í˜ì´ì§€ ë²ˆí˜¸ê°€ **`setCurrentPage`** í•¨ìˆ˜ë¥¼ í†µí•´ **`currentPage`** ìƒíƒœë¡œ ì„¤ì •ëœë‹¤.

4. **totalPages ê³„ì‚°**:

   ```jsx
   const totalPages = Math.ceil(users.length / itemsPerPage);
   ```

   - **`totalPages`**: ì „ì²´ í˜ì´ì§€ ìˆ˜ë¥¼ ê³„ì‚°í•œë‹¤.
     ì´ë¥¼ ìœ„í•´ ì „ì²´ ë°ì´í„°ì˜ ê¸¸ì´(**`users.length`**)ë¥¼ í•œ í˜ì´ì§€ì— í‘œì‹œë  ì•„ì´í…œ ìˆ˜(**`itemsPerPage`**)ë¡œ ë‚˜ëˆ„ê³  ì˜¬ë¦¼ í•¨ìˆ˜(**`Math.ceil`**)ë¥¼ ì‚¬ìš©í•˜ì—¬ ê³„ì‚°í•œë‹¤.

5. **getCurrentItems í•¨ìˆ˜**:

   ```jsx
   const getCurrentItems = () => {
     return getFilteredAndSortedItems().slice(
       (currentPage - 1) * itemsPerPage,
       currentPage * itemsPerPage
     );
   };
   ```

   - **`getCurrentItems`** í•¨ìˆ˜ëŠ” í˜„ì¬ í˜ì´ì§€ì— í‘œì‹œí•  ì•„ì´í…œì„ ë°˜í™˜í•œë‹¤.
   - **`getFilteredAndSortedItems`** í•¨ìˆ˜ë¡œë¶€í„° í•„í„°ë§ ë° ì •ë ¬ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ í›„,
     í˜„ì¬ í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” ì•„ì´í…œ ë²”ìœ„ë¥¼ **`slice`** ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¶”ì¶œí•˜ê²Œ ëœë‹¤.

6. **Pagination ì»´í¬ë„ŒíŠ¸ ë Œë”ë§**:

   ```jsx
   <Pagination
     current={currentPage}
     total={users.length}
     pageSize={itemsPerPage}
     onChange={handlePageChange}
   />
   ```

   - ìœ„ì˜ ì½”ë“œëŠ” Ant Designì˜ **`Pagination`** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬í•´ë‘” í˜ì´ì§€ë„¤ì´ì…˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•œë‹¤.
   - **`current`** propì€ í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë‚˜íƒ€ë‚´ë©°, **`total`** propì€ ì „ì²´ ì•„ì´í…œ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
   - **`pageSize`** propì€ í•œ í˜ì´ì§€ì— í‘œì‹œí•  ì•„ì´í…œ ìˆ˜ë¥¼ ì„¤ì •í•œë‹¤.
   - **`onChange`** propì€ í˜ì´ì§€ ë²ˆí˜¸ê°€ ë³€ê²½ë  ë•Œ ì‹¤í–‰í•  ì½œë°± í•¨ìˆ˜ë¡œ, **`handlePageChange`** í•¨ìˆ˜ê°€ í• ë‹¹ëœë‹¤.

---

### 2-2. ì—‘ì…€ ì»¬ëŸ¼ ì§€ì •

```jsx
// ì—‘ì…€ ì–‘ì‹
const tableColumns = [
  "ì‚¬ì›ë²ˆí˜¸",
  "ì´ë¦„",
  "ë‚˜ì´",
  "ìœ ê¸‰íœ´ê°€ì¼ìˆ˜",
  "ì†Œì •ê·¼ë¡œì¼ìˆ˜",
  "ì‹¤ì œê·¼ë¡œì¼ìˆ˜",
  "ì†Œì •ê·¼ë¡œì‹œê°„",
  "ì „í™”ë²ˆí˜¸",
  "ì´ë©”ì¼",
];
```

> **`tableColumns`** ë°°ì—´ì€ ì—‘ì…€ ì¶œë ¥ ì–‘ì‹ì˜ ì»¬ëŸ¼ ì´ë¦„ì„ í¬í•¨í•œë‹¤.

### 2-3 . ìƒë…„ì›”ì¼ì„ í˜„ì¬ ë‚˜ì´ë¡œ ë³€í™˜

```jsx
javascriptCopy code
// ë‚˜ì´ ë° ì¶œìƒë…„ë„ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
function getAgeAndBirthYear(birthDate) {
  // ë…„ë„ë§Œ ì¶”ì¶œ
  const birthYear = parseInt(birthDate.split("-")[0], 10);
  const currentYear = new Date().getFullYear();
  const age = currentYear - birthYear; // í˜„ì¬ ë‚˜ì´ ê³„ì‚°

  return `${birthYear}ë…„ ì¶œìƒ, ë‚˜ì´ ë§Œ ${age}ì„¸`;
}

```

> **`getAgeAndBirthYear`** í•¨ìˆ˜ëŠ” ì‚¬ì›ì˜ ì¶œìƒì¼ì„ ë°›ì•„ì„œ ë‚˜ì´ì™€ ì¶œìƒë…„ë„ë¥¼ ê³„ì‚°í•˜ê³  í•´ë‹¹ ì •ë³´ë¥¼ ë¬¸ìì—´ë¡œ ë°˜í™˜í•œë‹¤.
> í•´ë‹¹ ì½”ë“œëŠ” ì—‘ì…€ê¸°ëŠ¥ê³¼ ì„œë¹„ìŠ¤ ì‚¬ìš©ìì—ê²Œ ë³´ê¸° ì¢‹ê²Œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ê³ ì•ˆë˜ì—ˆë‹¤!

### 2-4. ì—‘ì…€ í•„ë“œì— ë“¤ì–´ê°ˆ ê°’

```jsx
// ì—‘ì…€ ë°ì´í„° ì„¤ì •ê³¼ ê°€ê³µ
useEffect(() => {
  setTableData(
    users.map((user) => [
      `${user.staff.empNum}`, // ì‚¬ì› ë²ˆí˜¸
      `${user.staff.empName}`, // ì‚¬ì› ì´ë¦„
      `${getAgeAndBirthYear(user.birthDate)}`, // ì—°ë„ë¥¼ ë‚˜ì´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
      `${user.vacation} ì¼`, // ìœ ê¸‰íœ´ê°€ì¼ìˆ˜
      `${user.workingDays} ì¼`, //ì†Œì •ê·¼ë¡œì¼ìˆ˜
      `${user.actualWorkDays} ì‹œê°„`, // ì‹¤ì œê·¼ë¡œì¼ìˆ˜
      `${user.workingHours} ì‹œê°„`, //ì†Œì •ê·¼ë¡œì‹œê°„
      `${user.phoneNumber} `, // í•¸ë“œí°
      `${user.staff.email} `, //ì´ë©”ì¼
    ])
  );
}, [users]);
```

> **`useEffect`**ëŠ” ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ **`users`** ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—‘ì…€ ì¶œë ¥ì„ ìœ„í•œ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê³ , **`tableData`** ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.

### 2-5. ì˜¤ë¦„ì°¨ìˆœ, ë‚´ë¦¼ì°¨ìˆœì— ëŒ€í•œ ì •ë ¬ê³¼ í˜ì´ì§•

```jsx
// í˜„ì¬í˜ì´ì§€ ë°˜í™˜
const getFilteredAndSortedItems = () => {
  let filteredUsers = users.filter((user) => {
    const nameMatch = user.staff.empName
      .toLowerCase()
      .includes(searchName.toLowerCase());
    const deptMatch = user.staff.dept
      .toLowerCase()
      .includes(searchDepartment.toLowerCase());
    const empNumMatch = String(user.staff.empNum).includes(searchEmpNum);

    return nameMatch && deptMatch && empNumMatch;
  });

  // ì •ë ¬ ë¡œì§
  if (currentSortKey === "empName") {
    filteredUsers.sort((a, b) =>
      sortDirection === "asc"
        ? a.staff.empName.localeCompare(b.staff.empName)
        : b.staff.empName.localeCompare(a.staff.empName)
    );
  } else if (currentSortKey === "vacation") {
    filteredUsers.sort((a, b) =>
      sortDirection === "asc"
        ? a.vacation - b.vacation
        : b.vacation - a.vacation
    );
  }
  return filteredUsers;
};
```

> **`getFilteredAndSortedItems`** í•¨ìˆ˜ëŠ” ê²€ìƒ‰ì–´ì™€ ì •ë ¬ ìƒíƒœë¥¼ ê³ ë ¤í•˜ì—¬ ë°ì´í„°ë¥¼ í•„í„°ë§í•˜ê³  ì •ë ¬í•œë‹¤.

### 2-6. í…Œì´ë¸” ì •ë ¬

```jsx
// ì •ë ¬
const sortByKey = (a, b, key, direction) => {
  if (a[key] === b[key]) return 0;
  const order = a[key] > b[key] ? 1 : -1;
  return direction === "asc" ? order : -order;
};

const handleSortBy = (key) => {
  const newDirection = sortDirection === "asc" ? "desc" : "asc";
  setCurrentSortKey(key);
  setSortDirection(newDirection);
};
```

> **`sortByKey`** í•¨ìˆ˜ëŠ” ì£¼ì–´ì§„ í‚¤ ë° ë°©í–¥ìœ¼ë¡œ ê°ì²´ ë°°ì—´ì„ ì •ë ¬í•˜ê³ , **`handleSortBy`** í•¨ìˆ˜ëŠ” ì»¬ëŸ¼ ì´ë¦„ì„ í´ë¦­í•˜ì—¬ í…Œì´ë¸”ì„ ì •ë ¬í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤. ì •ë ¬ì„ ë°”íƒ•ìœ¼ë¡œ í˜„ì¬ ì •ë ¬ í‚¤ì™€ ë°©í–¥ì„ ì—…ë°ì´íŠ¸í•œë‹¤.

### 2-7. ì²´í¬ë°•ìŠ¤ ì„ íƒ

```jsx
// ì²´í¬ë°•ìŠ¤ ì„ íƒ
const handleCheckbox = (index) => {
  setCheckedIndex(checkedIndex === index ? -1 : index);
};
```

> **`handleCheckbox`** í•¨ìˆ˜ëŠ” ê° í–‰ì˜ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒ ë˜ëŠ” í•´ì œí•œë‹¤. ì„ íƒí•œ í•­ëª©ì˜ ì¸ë±ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.

### 2-9. ê²€ìƒ‰ ê¸°ëŠ¥

```jsx
// ê²€ìƒ‰ì°½ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
const handleSearchNameChange = (event) => {
  setSearchName(event.target.value);
  setCurrentPage(1);
};

const handleSearchDepartmentChange = (event) => {
  setSearchDepartment(event.target.value);
  setCurrentPage(1);
};

const handleSearchEmpNumChange = (event) => {
  setSearchEmpNum(event.target.value);
  setCurrentPage(1);
};
```

> ì´ëŸ¬í•œ í•¨ìˆ˜ë“¤ì€ ê²€ìƒ‰ ì°½ì—ì„œ ì´ë¦„, ë¶€ì„œ, ë˜ëŠ” ì‚¬ì› ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ í•„í„°ë§í•œë‹¤.  
> ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ê³  ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë°ì´í„°ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ í•„í„°ë§ëœë‹¤.

```jsx
<Row>
  <Col md="4">
    <Input
      type="text"
      value={searchName}
      onChange={handleSearchNameChange}
      placeholder=" ì§ì› ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰"
      onClick={() => setCheckedIndex(-1)}
    />
  </Col>
  <Col md="4">
    <Input
      type="text"
      value={searchDepartment}
      onChange={handleSearchDepartmentChange}
      placeholder=" ë¶€ì„œ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰"
      onClick={() => setCheckedIndex(-1)}
    />
  </Col>
  <Col md="4">
    <Input
      type="text"
      value={searchEmpNum}
      onChange={handleSearchEmpNumChange}
      placeholder=" ì‚¬ì›ë²ˆí˜¸ë¡œ ê²€ìƒ‰"
      onClick={() => setCheckedIndex(-1)}
    />
  </Col>
</Row>
```

ê²€ìƒ‰ì°½ ì‚¬ìš© ëª¨ìŠµ ì´ë‹¤!

## 3. tableToExcel ê¸°ëŠ¥

<aside>
ğŸ’¡ ì‚¬ìš©ìê°€ ì„ íƒí•œ í…Œì´ë¸”ì˜ í–‰ ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë ¤ë°›ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•œ **`TableToExcel`** ì»´í¬ë„ŒíŠ¸ì´ë‹¤. 
ì´ ì»´í¬ë„ŒíŠ¸ëŠ” ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ ë Œë”ë§í•˜ê³ , í•´ë‹¹ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì„ íƒí•œ ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë³´ë‚´ëŠ” ì—­í• ì„ í•œë‹¤.

</aside>

```java
import React from "react";
import * as XLSX from "xlsx";
import { Button } from "reactstrap";

/**
 * TableToExcel ì»´í¬ë„ŒíŠ¸ëŠ” ì‚¬ìš©ìê°€ ì„ íƒí•œ í…Œì´ë¸”ì˜ í–‰ ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë ¤ë°›ê¸° ìœ„í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
 */
const TableToExcel = ({
  tableData, // ì „ì²´ í…Œì´ë¸” ë°ì´í„°
  tableColumns, // í…Œì´ë¸”ì˜ ì»¬ëŸ¼ ëª©ë¡
  fileName, // ì €ì¥í•  ì—‘ì…€ íŒŒì¼ì˜ ì´ë¦„
  sheetName, // ì—‘ì…€ ì‹œíŠ¸ì˜ ì´ë¦„
  checkedIndex, // ì‚¬ìš©ìê°€ ì„ íƒí•œ í…Œì´ë¸”ì˜ í–‰ ì¸ë±ìŠ¤
}) => {
  /**
   * ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë ¤ë°›ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
   */
  const exportToExcel = () => {
    // ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ë¥¼ ì¶”ì¶œ
    const checkedData = extractCheckedData(tableData, checkedIndex);

    // ì—‘ì…€ íŒŒì¼ì— ì¶”ê°€ë  ë°ì´í„° ëª©ë¡ì„ êµ¬ì„±
    // ì´ ëª©ë¡ì—ëŠ” ì œëª©, ì»¬ëŸ¼ ì´ë¦„, ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ê°€ í¬í•¨ëœë‹¤.
    const sheetData = [["ê·¼íƒœì •ì‚°"], tableColumns, ...checkedData];

    // ë°ì´í„° ëª©ë¡ì„ ë°”íƒ•ìœ¼ë¡œ ì—‘ì…€ ì‹œíŠ¸ë¥¼ ìƒì„±
    const ws = XLSX.utils.aoa_to_sheet(sheetData);

    // ìƒˆë¡œìš´ ì—‘ì…€ ì›Œí¬ë¶ì„ ìƒì„±í•˜ê³ , ì•ì„œ ìƒì„±í•œ ì‹œíŠ¸ë¥¼ ì¶”ê°€
    const wb = XLSX.utils.book_new();
    XLSX.utils.book_append_sheet(wb, ws, sheetName);

    // ì›Œí¬ë¶ì„ ì—‘ì…€ íŒŒì¼ë¡œ ì €ì¥
    XLSX.writeFile(wb, `${fileName}_ê·¼íƒœì •ì‚°.xlsx`);
  };

  // "ë‚´ë ¤ë°›ê¸°" ë²„íŠ¼. ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ exportToExcel í•¨ìˆ˜ê°€ ì‹¤í–‰ë‹¤.
  return (
    <Button size="sm" onClick={exportToExcel}>
      ë‚´ë ¤ë°›ê¸°
    </Button>
  );
};

/**
 * ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ë¥¼ ì¶”ì¶œ.
 */
const extractCheckedData = (tableData, checkedIndex) => {
  return tableData.filter((rowData, rowIndex) => rowIndex === checkedIndex);
};

export default TableToExcel;
```

### 3-1. ì£¼ìš” ê¸°ëŠ¥ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

1. **`exportToExcel` í•¨ìˆ˜**: ì´ í•¨ìˆ˜ëŠ” ì—‘ì…€ íŒŒì¼ë¡œ ë°ì´í„°ë¥¼ ë‚´ë³´ë‚´ëŠ” í•µì‹¬ ì—­í• ì„ í•œë‹¤. ì•„ë˜ì™€ ê°™ì´ ë™ì‘í•œë‹¤.

   > - **`extractCheckedData`** í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ë¥¼ ì¶”ì¶œí•œë‹¤.
   >
   > - ë°ì´í„° êµ¬ì„±: ì—‘ì…€ íŒŒì¼ì— ì¶”ê°€ë  ë°ì´í„° ëª©ë¡ì„ êµ¬ì„±í•œë‹¤. ì´ ëª©ë¡ì—ëŠ” ì œëª©, ì»¬ëŸ¼ ì´ë¦„, ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ê°€ í¬í•¨ëœë‹¤.
   > - ì‹œíŠ¸ ìƒì„±: ë°ì´í„° ëª©ë¡ì„ ë°”íƒ•ìœ¼ë¡œ ì—‘ì…€ ì‹œíŠ¸ë¥¼ ìƒì„±í•œë‹¤.
   > - ì›Œí¬ë¶ ìƒì„±: ìƒˆë¡œìš´ ì—‘ì…€ ì›Œí¬ë¶ì„ ìƒì„±í•˜ê³ , ì•ì„œ ìƒì„±í•œ ì‹œíŠ¸ë¥¼ ì¶”ê°€í•œë‹¤.
   >
   > - íŒŒì¼ ì €ì¥: ì›Œí¬ë¶ì„ ì—‘ì…€ íŒŒì¼ë¡œ ì €ì¥í•œë‹¤.

2. **"ë‚´ë ¤ë°›ê¸°" ë²„íŠ¼**: í™”ë©´ì— ë‚´ë ¤ë°›ê¸° ë²„íŠ¼ì„ ë Œë”ë§í•œë‹¤.

   > ì´ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ **`exportToExcel`** í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì–´ ì‚¬ìš©ìê°€ ì„ íƒí•œ ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë³´ë‚¸ë‹¤.

3. **`extractCheckedData` í•¨ìˆ˜**: ì´ í•¨ìˆ˜ëŠ” ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ë¥¼ ì¶”ì¶œí•œë‹¤. **`tableData`** ë°°ì—´ì—ì„œ **`checkedIndex`**ì— í•´ë‹¹í•˜ëŠ” í–‰ ë°ì´í„°ë¥¼ í•„í„°ë§í•˜ì—¬ ë°˜í™˜í•œë‹¤.

   > ì´ ì»´í¬ë„ŒíŠ¸ëŠ” ì—‘ì…€ íŒŒì¼ ë‚´ë ¤ë°›ê¸° ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì—¬ ë°ì´í„°ë¥¼ ì‚¬ìš©ìê°€ ì†ì‰½ê²Œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.
   > ì´ë¡œì¨ ì‚¬ìš©ìëŠ” í…Œì´ë¸”ì—ì„œ ì„ íƒí•œ ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ì €ì¥í•˜ê³  ê³µìœ í•˜ëŠ” ë° í¸ë¦¬í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í–ˆë‹¤!

## 4. XLSX ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ë°©ë²•

ì´ ì½”ë“œëŠ” Reactë¥¼ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸” ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë³´ë‚´ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•œ **`TableToExcel`** ì»´í¬ë„ŒíŠ¸ì´ë‹¤.

![Alt text](image-4.png)

![Alt text](image-5.png)

### 4-1. **XLSX ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ í•„ìˆ˜ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°**:

```jsx
import React from "react";
import * as XLSX from "xlsx";
import { Button } from "reactstrap";
```

- **`XLSX`**: ì—‘ì…€ íŒŒì¼ì„ ìƒì„±í•˜ê³  ì¡°ì‘í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, **`xlsx`** ëª¨ë“ˆì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
- **`Button`**: Reactstrap ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

1. **`TableToExcel` í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ì •ì˜**:

   ```jsx
   const TableToExcel = ({
     tableData, // ì „ì²´ í…Œì´ë¸” ë°ì´í„°
     tableColumns, // í…Œì´ë¸”ì˜ ì»¬ëŸ¼ ëª©ë¡
     fileName, // ì €ì¥í•  ì—‘ì…€ íŒŒì¼ì˜ ì´ë¦„
     sheetName, // ì—‘ì…€ ì‹œíŠ¸ì˜ ì´ë¦„
     checkedIndex, // ì‚¬ìš©ìê°€ ì„ íƒí•œ í…Œì´ë¸”ì˜ í–‰ ì¸ë±ìŠ¤
   }) => {
   ```

   - **`TableToExcel`** ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì†ì„±ì„ ë°›ì•„ì˜µë‹ˆë‹¤:
     - **`tableData`**: ì „ì²´ í…Œì´ë¸” ë°ì´í„°.
     - **`tableColumns`**: í…Œì´ë¸”ì˜ ì»¬ëŸ¼ ëª©ë¡.
     - **`fileName`**: ì €ì¥í•  ì—‘ì…€ íŒŒì¼ì˜ ì´ë¦„.
     - **`sheetName`**: ì—‘ì…€ ì‹œíŠ¸ì˜ ì´ë¦„.
     - **`checkedIndex`**: ì‚¬ìš©ìê°€ ì„ íƒí•œ í…Œì´ë¸”ì˜ í–‰ ì¸ë±ìŠ¤.

### 4-2. **exportToExcel í•¨ìˆ˜ ì •ì˜**:

```jsx
const exportToExcel = () => {
  // ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ë¥¼ ì¶”ì¶œ
  const checkedData = extractCheckedData(tableData, checkedIndex);

  // ì—‘ì…€ íŒŒì¼ì— ì¶”ê°€ë  ë°ì´í„° ëª©ë¡ì„ êµ¬ì„±
  const sheetData = [["ê·¼íƒœì •ì‚°"], tableColumns, ...checkedData];

  // ë°ì´í„° ëª©ë¡ì„ ë°”íƒ•ìœ¼ë¡œ ì—‘ì…€ ì‹œíŠ¸ë¥¼ ìƒì„±
  const ws = XLSX.utils.aoa_to_sheet(sheetData);

  // ìƒˆë¡œìš´ ì—‘ì…€ ì›Œí¬ë¶ì„ ìƒì„±í•˜ê³ , ì•ì„œ ìƒì„±í•œ ì‹œíŠ¸ë¥¼ ì¶”ê°€
  const wb = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb, ws, sheetName);

  // ì›Œí¬ë¶ì„ ì—‘ì…€ íŒŒì¼ë¡œ ì €ì¥
  XLSX.writeFile(wb, `${fileName}_ê·¼íƒœì •ì‚°.xlsx`);
};
```

- **`exportToExcel`** í•¨ìˆ˜ëŠ” ë‚´ë³´ë‚´ê¸° ë²„íŠ¼ì´ í´ë¦­ë˜ë©´ ì‹¤í–‰ëœë‹¤.
- ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ê³ , ì´ ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•œ ë‹¨ê³„ë¥¼ ìˆ˜í–‰ë‹¤.

### 4-3. **"ë‚´ë ¤ë°›ê¸°" ë²„íŠ¼ ë Œë”ë§**:

```jsx
return (
  <Button size="sm" onClick={exportToExcel}>
    ë‚´ë ¤ë°›ê¸°
  </Button>
);
```

- í™”ë©´ì— "ë‚´ë ¤ë°›ê¸°" ë²„íŠ¼ì„ ë Œë”ë§í•˜ê³ , ì´ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ **`exportToExcel`** í•¨ìˆ˜ê°€ ì‹¤í–‰ë‹¤.

1. **`extractCheckedData` í•¨ìˆ˜ ì •ì˜**:

   ```jsx
   const extractCheckedData = (tableData, checkedIndex) => {
     return tableData.filter((rowData, rowIndex) => rowIndex === checkedIndex);
   };
   ```

   - **`extractCheckedData`** í•¨ìˆ˜ëŠ” ì‚¬ìš©ìê°€ ì„ íƒí•œ í–‰ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
   - **`tableData`** ë°°ì—´ì—ì„œ **`checkedIndex`**ì— í•´ë‹¹í•˜ëŠ” í–‰ ë°ì´í„°ë¥¼ í•„í„°ë§í•˜ì—¬ ë°˜í™˜ë‹¤.

í•´ë‹¹ ì—‘ì…€ ì»´í¬ë„ŒíŠ¸ëŠ” ì—‘ì…€ ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ ì‚¬ìš©ìê°€ ì„ íƒí•œ ë°ì´í„°ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê³  ì €ì¥í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.
ì´ê²ƒì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë¥¼ ê³µìœ í•˜ê±°ë‚˜ ë°±ì—…í•˜ëŠ” ë° ìœ ìš©í•œ ê¸°ëŠ¥ì´ë‹¤.

# back-end

- controller

  ```java
  package com.project.backend.controller.timeManagementSystem;

  import com.project.backend.entity.timeManagementSystem.TimeManagementSystem;
  import com.project.backend.service.timemanagement.TimeManagementService;
  import org.springframework.beans.factory.annotation.Autowired;
  import org.springframework.web.bind.annotation.GetMapping;
  import org.springframework.web.bind.annotation.RequestMapping;
  import org.springframework.web.bind.annotation.RestController;

  import java.util.List;

  @RestController
  @RequestMapping("/api")
  public class TimeManagementController {

    private final TimeManagementService timeManagementService;

    @Autowired
    public TimeManagementController(TimeManagementService timeManagementService) {
      this.timeManagementService = timeManagementService;
    }

    // ì—”ë“œí¬ì¸íŠ¸: ëª¨ë“  TimeManagementSystem ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
    @GetMapping("/timeManagement")
    public List<TimeManagementSystem> getAllTimeManagementData() {
      return timeManagementService.findAll();
    }

    // ì¶”ê°€ì ì¸ ì—”ë“œí¬ì¸íŠ¸ë‚˜ ë¡œì§ì€ í•„ìš”ì— ë”°ë¼ ì¶”ê°€í•©ë‹ˆë‹¤.
  }
  ```

- Dto

  ```java
  package com.project.backend.dto;

  import lombok.Getter;
  import lombok.Setter;

  import java.util.Date;

  @Getter
  @Setter
  public class TimeManagementDto {
      private Long id;
      private Long empNum;
      private String title;
      private String empName;
      private Date start;
      private Date end;
      private String description;

      public TimeManagementDto() {
          // ê¸°ë³¸ ìƒì„±ì
      }
  }
  ```

- entity

  ```java
  package com.project.backend.entity.timeManagementSystem;

  import com.project.backend.entity.Staff;
  import jakarta.persistence.*;

  import java.time.LocalDate;
  import java.time.YearMonth;

  @Entity
  public class TimeManagementSystem {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne
    @JoinColumn(name = "staff_id")
    private Staff staff;

    // ìœ ê¸‰íœ´ê°€ ì¼ìˆ˜
    private int vacation;

    // ì†Œì •ê·¼ë¡œì¼ìˆ˜
    private int workingDays;

    //ì‹¤ì œê·¼ë¡œì¼ìˆ˜
    private int actualWorkDays;

    //ì†Œì •ê·¼ë¡œì‹œê°„
    private int workingHours;

    //ìœ ê¸‰íœ´ê°€
    private int unpaid;

    //ë¬´ê¸‰íœ´ê°€
    private int paid;
    private Long empNum;

    private String empId;

    private String dept;

    private String position;

    private String empName;

    private String birthDate;

    private String phoneNumber;

    private String address;

    private String email;

  // ë‹¹ì›”ì˜ í‰ì¼ ì¼ìˆ˜ ê³„ì‚° ë©”ì„œë“œ
  public int calculateWeekdaysInMonth(int year, int month) {
    YearMonth yearMonth = YearMonth.of(year, month);
    LocalDate firstDayOfMonth = yearMonth.atDay(1);
    LocalDate lastDayOfMonth = yearMonth.atEndOfMonth();

    int weekdays = 0;
    LocalDate currentDate = firstDayOfMonth;

    while (!currentDate.isAfter(lastDayOfMonth)) {
      if (currentDate.getDayOfWeek().getValue() >= 1 && currentDate.getDayOfWeek().getValue() <= 5) {
        weekdays++;
      }
      currentDate = currentDate.plusDays(1);
    }

    return weekdays;
  }

    // ë‹¹ì›” í‰ì¼ì¼ìˆ˜ x 8ì„ ì†Œì •ê·¼ë¡œì‹œê°„ í•„ë“œì— ì„¤ì •í•˜ëŠ” ë©”ì„œë“œ
    public void updateWorkingHours() {
      int year = YearMonth.now().getYear();
      int month = YearMonth.now().getMonthValue();

      int weekdaysInMonth = calculateWeekdaysInMonth(year, month);
      this.workingHours = weekdaysInMonth * 8;
    }

    // ì´ˆê¸°í™” ë©”ì„œë“œì—ì„œ ê°’ì„ ê³„ì‚°í•˜ì—¬ í•„ë“œì— ì„¤ì •
    @PrePersist
    @PreUpdate
    public void initializeValues() {
      int year = YearMonth.now().getYear();
      int month = YearMonth.now().getMonthValue();

      int weekdaysInMonth = calculateWeekdaysInMonth(year, month);
      this.workingDays = weekdaysInMonth;
      this.actualWorkDays = weekdaysInMonth; // ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •

      updateWorkingHours(); // ì†Œì •ê·¼ë¡œì‹œê°„ ì—…ë°ì´íŠ¸
    }

  //  ===============================
    public Long getId() {
      return id;
    }

    public void setId(Long id) {
      this.id = id;
    }

    public Staff getStaff() {
      return staff;
    }

    public void setStaff(Staff staff) {
      this.staff = staff;
    }

    public int getVacation() {
      return vacation;
    }

    public void setVacation(int vacation) {
      this.vacation = vacation;
    }

    public int getWorkingDays() {
      return workingDays;
    }

    public void setWorkingDays(int workingDays) {
      this.workingDays = workingDays;
    }

    public int getActualWorkDays() {
      return actualWorkDays;
    }

    public void setActualWorkDays(int actualWorkDays) {
      this.actualWorkDays = actualWorkDays;
    }

    public int getWorkingHours() {
      return workingHours;
    }

    public void setWorkingHours(int workingHours) {
      this.workingHours = workingHours;
    }

    public Long getEmpNum() {
      return empNum;
    }

    public String getEmpId() {
      return empId;
    }

    public String getDept() {
      return dept;
    }

    public void setDept(String dept) {
      this.dept = dept;
    }

    public String getPosition() {
      return position;
    }

    public String getEmpName() {
      return empName;
    }

    public String getBirthDate() {
      return birthDate;
    }

    public String getPhoneNumber() {
      return phoneNumber;
    }

    public String getAddress() {
      return address;
    }

    public String getEmail() {
      return email;
    }

    public int getUnpaid() {
      return unpaid;
    }

    public void setUnpaid(int unpaid) {
      this.unpaid = unpaid;
    }

    public int getPaid() {
      return paid;
    }

    public void setPaid(int paid) {
      this.paid = paid;
    }

    public void setEmpNum(Long empNum) {
      this.empNum = empNum;
    }

    public void setEmpId(String empId) {
      this.empId = empId;
    }

    public void setPosition(String position) {
      this.position = position;
    }

    public void setEmpName(String empName) {
      this.empName = empName;
    }

    public void setBirthDate(String birthDate) {
      this.birthDate = birthDate;
    }

    public void setPhoneNumber(String phoneNumber) {
      this.phoneNumber = phoneNumber;
    }

    public void setAddress(String address) {
      this.address = address;
    }

    public void setEmail(String email) {
      this.email = email;
    }
  }
  ```

- repository

  ```java
  package com.project.backend.repository;

  import com.project.backend.entity.Staff;
  import com.project.backend.entity.timeManagementSystem.TimeManagementSystem;
  import org.springframework.data.jpa.repository.JpaRepository;
  import org.springframework.stereotype.Repository;

  @Repository
  public interface TimeManagementRepository extends JpaRepository<TimeManagementSystem, Long> {
    // í•„ìš”í•œ ì¶”ê°€ ì¿¼ë¦¬ ë©”ì„œë“œë“¤ì„ ì—¬ê¸°ì— ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    // ì˜ˆë¥¼ ë“¤ì–´, ì´ë¦„ìœ¼ë¡œ TimeManagementSystem ë°ì´í„°ë¥¼ ì°¾ëŠ” ë©”ì„œë“œëŠ” ì•„ë˜ì™€ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    // List<TimeManagementSystem> findByEmpName(String empName);
    void deleteByStaff(Staff staff);
  }
  ```

- service

  ```java
  package com.project.backend.service.timemanagement;

  import com.project.backend.entity.Staff;
  import com.project.backend.entity.timeManagementSystem.TimeManagementSystem;
  import com.project.backend.repository.StaffRepository;
  import com.project.backend.repository.TimeManagementRepository;
  import org.springframework.beans.factory.annotation.Autowired;
  import org.springframework.stereotype.Service;

  import java.util.List;
  import java.util.Optional;

  @Service
  public class TimeManagementService {

    private final TimeManagementRepository timeManagementRepository;

    @Autowired
    private StaffRepository staffRepository;

    public TimeManagementService(TimeManagementRepository timeManagementRepository) {
      this.timeManagementRepository = timeManagementRepository;
    }

    public void createTimeManagementEntity(Staff staff) {
      TimeManagementSystem timeManagementSystem = new TimeManagementSystem();

      // TimeManagementSystemì— Staff ê°ì²´ë¥¼ ì—°ê²°
      timeManagementSystem.setStaff(staff);

      timeManagementSystem.setEmpNum(staff.getEmpNum());
      timeManagementSystem.setEmpId(staff.getEmpId());
      timeManagementSystem.setPosition(staff.getPosition());
      timeManagementSystem.setEmpName(staff.getEmpName());
      timeManagementSystem.setBirthDate(staff.getBirthDate());
      timeManagementSystem.setPhoneNumber(staff.getPhoneNumber());
      timeManagementSystem.setAddress(staff.getAddress());
      timeManagementSystem.setEmail(staff.getEmail());
      timeManagementSystem.setDept(staff.getDept());

      timeManagementRepository.save(timeManagementSystem);
    }

    public void deleteStaffAndTimeManagementSystem(Long empNum) {
      Staff staff = staffRepository.findById(empNum).orElse(null);
      if (staff != null) {
        timeManagementRepository.deleteByStaff(staff);
        staffRepository.deleteById(empNum);
      }
    }
    public void deleteByStaff(Staff staff) {
      timeManagementRepository.deleteByStaff(staff);
    }

    // ëª¨ë“  TimeManagementSystem ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    public List<TimeManagementSystem> findAll() {
      return timeManagementRepository.findAll();
    }

    // íŠ¹ì • IDì— í•´ë‹¹í•˜ëŠ” TimeManagementSystem ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    public Optional<TimeManagementSystem> findById(Long id) {
      return timeManagementRepository.findById(id);
    }

    // TimeManagementSystem ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
    public TimeManagementSystem save(TimeManagementSystem timeManagementSystem) {
      return timeManagementRepository.save(timeManagementSystem);
    }

    // íŠ¹ì • IDì˜ TimeManagementSystem ë°ì´í„°ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
    public void deleteById(Long id) {
      timeManagementRepository.deleteById(id);
    }

  }
  ```

## ê¸°ë³¸ ê·¼ë¡œì¼ ê³„ì‚° ë¡œì§

<aside>
ğŸ“ ê·¸ë¦¬ê³  ê° ì½”ë“œì˜ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- **ì»¨íŠ¸ë¡¤ëŸ¬**: REST API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì •ì˜í•˜ê³  ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
- **DTO**: ë°ì´í„° ì „ì†¡ ê°ì²´ë¡œ, ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ êµ¬ì¡°ì²´ì…ë‹ˆë‹¤.
- **ì—”í„°í‹°**: ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ê°ì²´ë¡œ, ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
- **ë¦¬í¬ì§€í† ë¦¬**: ì—”í„°í‹°ì™€ ê´€ë ¨ëœ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë©”ì„œë“œë¥¼ ì •ì˜í•˜ê³  êµ¬í˜„í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

ì´ ì½”ë“œì˜ í•µì‹¬ì€ ì—”í„°í‹° í´ë˜ìŠ¤(**`TimeManagementSystem`**)ì— ìˆìœ¼ë©°, ê·¼íƒœì •ì‚°ê³¼ ê´€ë ¨ëœ ë°ì´í„° ì²˜ë¦¬ ë° ì´ˆê¸°í™” ë¡œì§ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.

</aside>

# controller

---

> ì´ ì½”ë“œëŠ” Java Spring Frameworkë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ì„±ëœ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‹œê°„ ê´€ë¦¬ ì‹œìŠ¤í…œ(Time Management System)ê³¼ ê´€ë ¨ëœ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” REST API ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì´ë‹¤.
> ì•„ë˜ì—ì„œ ì½”ë“œë¥¼ ìì„¸íˆ ì„¤ëª…í•˜ê² ë‹¤.

```jsx
package com.project.backend.controller.timeManagementSystem;

import com.project.backend.entity.timeManagementSystem.TimeManagementSystem;
import com.project.backend.service.timemanagement.TimeManagementService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@RestController
@RequestMapping("/api")
public class TimeManagementController {

  private final TimeManagementService timeManagementService;

  //ì˜ì¡´ì„± ì£¼ì…
  @Autowired
  public TimeManagementController(TimeManagementService timeManagementService) {
    this.timeManagementService = timeManagementService;
  }

  // ì—”ë“œí¬ì¸íŠ¸: ëª¨ë“  TimeManagementSystem ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
  @GetMapping("/timeManagement")
  public List<TimeManagementSystem> getAllTimeManagementData() {
    return timeManagementService.findAll();
  }
}
```

## 1-1. **íŒ¨í‚¤ì§€ ë° ì„í¬íŠ¸**:

```java
package com.project.backend.controller.timeManagementSystem;

import com.project.backend.entity.timeManagementSystem.TimeManagementSystem;
import com.project.backend.service.timemanagement.TimeManagementService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;
```

- ì½”ë“œëŠ” **`com.project.backend.controller.timeManagementSystem`** íŒ¨í‚¤ì§€ ë‚´ì— ìœ„ì¹˜í•œë‹¤.
- ì‚¬ìš©ëœ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ë¥¼ **`import`** ë¬¸ì„ í†µí•´ ê°€ì ¸ì˜¨ë‹¤. ì´ëŸ¬í•œ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ëŠ” ë‚˜ì¤‘ì— ì½”ë“œì—ì„œ ì‚¬ìš©ëœë‹¤.

## 1-2. **TimeManagementController í´ë˜ìŠ¤ ì •ì˜**:

```java
@RestController
@RequestMapping("/api")
public class TimeManagementController {
```

- **`TimeManagementController`** í´ë˜ìŠ¤ëŠ” RESTful APIë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì´ë‹¤.
- **`@RestController`** ì–´ë…¸í…Œì´ì…˜ì€ ì´ í´ë˜ìŠ¤ê°€ REST ì»¨íŠ¸ë¡¤ëŸ¬ì„ì„ ë‚˜íƒ€ë‚¸ë‹¤.
- **`@RequestMapping("/api")`** ì–´ë…¸í…Œì´ì…˜ì€ ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì—”ë“œí¬ì¸íŠ¸ë“¤ì´ "/api" ê²½ë¡œì— ë§¤í•‘ë¨ì„ ë‚˜íƒ€ë‚¸ë‹¤.

<aside>
ğŸ’¡ @Controller ì™€ @RestController

Spring MVCì˜ @RestControllerì€ @Controllerì™€ @ResponseBodyì˜ ì¡°í•©ì´ë‹¤.

Spring í”„ë ˆì„ ì›Œí¬ì—ì„œ RESTful ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë³´ë‹¤ ì‰½ê²Œ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ Spring 4.0ì—ì„œ ì¶”ê°€ë˜ì—ˆë‹¤ê³ í•œë‹¤.

ê·¼ë³¸ì ì¸ ì°¨ì´ì ì€ @Controllerì˜ ì—­í• ì€ Model ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë°ì´í„°ë¥¼ ë‹´ê³  Viewë¥¼ ì°¾ëŠ” ê²ƒì´ì§€ë§Œ,
@RestControllerëŠ” ë‹¨ìˆœíˆ ê°ì²´ë§Œì„ ë°˜í™˜í•˜ê³  ê°ì²´ ë°ì´í„°ëŠ” JSON ë˜ëŠ” XML í˜•ì‹ìœ¼ë¡œ HTTP ì‘ë‹µì— ë‹´ì•„ì„œ ì „ì†¡í•œë‹¤.
ë¬¼ë¡  @Controllerì™€ @ResponseBodyë¥¼ ì‚¬ìš©í•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆì§€ë§Œ ì´ëŸ¬í•œ ë°©ì‹ì€ RESTful ì›¹ì„œë¹„ìŠ¤ì˜ ê¸°ë³¸ ë™ì‘ì´ê¸° ë•Œë¬¸ì—
Springì€ @Controllerì™€ @ResponseBodyì˜ ë™ì‘ì„ ì¡°í•©í•œ @RestControllerì„ ë„ì…í–ˆë‹¤.

</aside>

## 1-3. **ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)**:

```java
private final TimeManagementService timeManagementService;

  @Autowired
  public TimeManagementController(TimeManagementService timeManagementService) {
    this.timeManagementService = timeManagementService;
  }
```

- **`TimeManagementService`** í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…ë°›ëŠ”ë‹¤.  
  ì´ê²ƒì€ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ **`timeManagementService`**ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
- ìƒì„±ì ì£¼ì…ì„ í†µí•´ ì˜ì¡´ì„± ì£¼ì…(Dependency Injection)ì´ ì´ë£¨ì–´ì§„ë‹¤.

## 1-4. **ì—”ë“œí¬ì¸íŠ¸ ì •ì˜**:

```java
 // ì—”ë“œí¬ì¸íŠ¸: ëª¨ë“  TimeManagementSystem ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
  @GetMapping("/timeManagement")
  public List<TimeManagementSystem> getAllTimeManagementData() {
    return timeManagementService.findAll();
  }
```

- **`@GetMapping("/timeManagement")`** ì–´ë…¸í…Œì´ì…˜ì€ HTTP GET ìš”ì²­ì´ "/api/timeManagement" ì—”ë“œí¬ì¸íŠ¸ì— ë§¤í•‘ë˜ì–´ ì´í›„ì˜ ë©”ì„œë“œê°€ ì´ë¥¼ ì²˜ë¦¬í•¨ì„ ë‚˜íƒ€ë‚¸ë‹¤.
- **`getAllTimeManagementData`** ë©”ì„œë“œëŠ” ëª¨ë“  ì‹œê°„ ê´€ë¦¬ ë°ì´í„°ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ ë°ì´í„°ëŠ” **`timeManagementService`**ì—ì„œ ê°€ì ¸ì˜¨ë‹¤.

# DTO

---

> ì´ ì½”ë“œëŠ” Java Spring Frameworkë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ì„±ëœ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‹œê°„ ê´€ë¦¬ ì‹œìŠ¤í…œ(Time Management System)ê³¼ ê´€ë ¨ëœ ë°ì´í„° ì „ì†¡ ê°ì²´(Data Transfer Object, DTO)ë¥¼ ì •ì˜í•˜ëŠ” í´ë˜ìŠ¤ì´ë‹¤.
> ì•„ë˜ì—ì„œ ì½”ë“œë¥¼ ìì„¸íˆ ì„¤ëª…í•˜ê² ë‹¤.

```jsx
package com.project.backend.dto;

import lombok.Getter;
import lombok.Setter;

import java.util.Date;

@Getter
@Setter
public class TimeManagementDto {
    private Long id;
    private Long empNum;
    private String title;
    private String empName;
    private Date start;
    private Date end;
    private String description;

    public TimeManagementDto() {
        // ê¸°ë³¸ ìƒì„±ì
    }
}
```

## 1-1. **íŒ¨í‚¤ì§€ì™€ ì„í¬íŠ¸**:

```java
package com.project.backend.dto;

import lombok.Getter;
import lombok.Setter;

import java.util.Date;
```

- ì½”ë“œëŠ” **`com.project.backend.dto`** íŒ¨í‚¤ì§€ ë‚´ì— ìœ„ì¹˜í•œë‹¤.
- ì‚¬ìš©ëœ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ë¥¼ **`import`** ë¬¸ì„ í†µí•´ ê°€ì ¸ì˜¤ê³ , **`@Getter`**ì™€ **`@Setter`**ëŠ” ë¡¬ë³µ(Lombok) ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ, í´ë˜ìŠ¤ì˜ Getter ë° Setter ë©”ì„œë“œë¥¼ ìë™ ìƒì„±í•˜ë„ë¡ í•˜ì—¬ ì½”ë“œë¥¼ ê°„ëµíˆ í•  ìˆ˜ ìˆë‹¤.

## 1-2. **TimeManagementDto í´ë˜ìŠ¤ ì •ì˜**:

```java
@Getter
@Setter
public class TimeManagementDto {
}
```

- **`TimeManagementDto`** í´ë˜ìŠ¤ëŠ” ì‹œê°„ ê´€ë¦¬ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ ë°ì´í„° ì „ì†¡ ê°ì²´(DTO)ë¡œ ì„¤ê³„ë˜ì—ˆë‹¤.
- **`@Getter`**ì™€ **`@Setter`** ì–´ë…¸í…Œì´ì…˜ì€ í•´ë‹¹ í´ë˜ìŠ¤ì˜ í•„ë“œì— ëŒ€í•œ Getter ë° Setter ë©”ì„œë“œë¥¼ ìë™ ìƒì„±í•´ì¤€ë‹¤.

## 1-3. **TimeManagementDto í´ë˜ìŠ¤ì˜ í•„ë“œ**:

```java
    private Long id;
    private Long empNum;
    private String title;
    private String empName;
    private Date start;
    private Date end;
    private String description;
```

- ì´ í´ë˜ìŠ¤ì—ëŠ” ë‹¤ì–‘í•œ í•„ë“œê°€ ì •ì˜ë˜ì–´ ìˆìœ¼ë©°, ì‹œê°„ ê´€ë¦¬ ë°ì´í„°ë¥¼ í‘œí˜„í•œë‹¤.
  - **`id`**: ì‹œê°„ ê´€ë¦¬ í•­ëª©ì˜ ê³ ìœ  ì‹ë³„ì(Long í˜•ì‹).
  - **`empNum`**: ì§ì› ë²ˆí˜¸(Long í˜•ì‹).
  - **`title`**: ì‹œê°„ ê´€ë¦¬ í•­ëª©ì˜ ì œëª©(ë¬¸ìì—´).
  - **`empName`**: ì§ì› ì´ë¦„(ë¬¸ìì—´).
  - **`start`**: ì‹œê°„ ê´€ë¦¬ í•­ëª©ì˜ ì‹œì‘ ì¼ì ë° ì‹œê°„(Date í˜•ì‹).
  - **`end`**: ì‹œê°„ ê´€ë¦¬ í•­ëª©ì˜ ì¢…ë£Œ ì¼ì ë° ì‹œê°„(Date í˜•ì‹).
  - **`description`**: ì‹œê°„ ê´€ë¦¬ í•­ëª©ì— ëŒ€í•œ ì„¤ëª…(ë¬¸ìì—´).

## 1-4. **ê¸°ë³¸ ìƒì„±ì**:

```java
public TimeManagementDto() {
        // ê¸°ë³¸ ìƒì„±ì
    }
```

- ì´ í´ë˜ìŠ¤ëŠ” ê¸°ë³¸ ìƒì„±ìë¥¼ ê°€ì§€ë©°, ëª…ì‹œì ìœ¼ë¡œ ì•„ë¬´ëŸ° ë™ì‘ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.

í•´ë‹¹ ì½”ë“œëŠ” ì‹œê°„ ê´€ë¦¬ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ DTOë¥¼ ì •ì˜í•˜ëŠ” ê°„ë‹¨í•œ í´ë˜ìŠ¤ì´ë‹¤.  
DTOëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ë°ì´í„° ì „ì†¡ì„ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.
ì´ DTO í´ë˜ìŠ¤ëŠ” ì‹œê°„ ê´€ë¦¬ ì‹œìŠ¤í…œê³¼ ê´€ë ¨ëœ í•„ìˆ˜ ë°ì´í„°ë¥¼ ìº¡ìŠí™”í•˜ê³ , í•´ë‹¹ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ ì‚¬ìš©ë  ê²ƒ ì´ë‹¤.

# repository

---

> ì´ ì½”ë“œëŠ” Spring Data JPAë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë¦¬í¬ì§€í† ë¦¬(repository) ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•˜ëŠ” Java í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ì½”ë“œë¥¼ ìì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

## 1-1. **íŒ¨í‚¤ì§€ì™€ ì„í¬íŠ¸**:

```java
javaCopy code
package com.project.backend.repository;

import com.project.backend.entity.Staff;
import com.project.backend.entity.timeManagementSystem.TimeManagementSystem;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;
```

- **`com.project.backend.repository`** íŒ¨í‚¤ì§€ì— ìœ„ì¹˜í•œ í´ë˜ìŠ¤ì´ë‹¤.
- **`import`** ë¬¸ì„ í†µí•´ ë‹¤ë¥¸ í´ë˜ìŠ¤ ë° ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” **`Staff`**ì™€ **`TimeManagementSystem`** ì—”í‹°í‹°, ê·¸ë¦¬ê³  Spring Data JPAì˜ **`JpaRepository`**ì™€ **`Repository`** ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì ¸ì˜¨ë‹¤.

## 1-2. **TimeManagementRepository ì¸í„°í˜ì´ìŠ¤ ì •ì˜**:

```java
@Repository
public interface TimeManagementRepository extends JpaRepository<TimeManagementSystem, Long> {
}
```

- **`TimeManagementRepository`**ëŠ” Spring Data JPAì˜ **`JpaRepository`** ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†í•œë‹¤.
- **`@Repository`** ì–´ë…¸í…Œì´ì…˜ì€ Spring í”„ë ˆì„ì›Œí¬ì—ê²Œ ì´ ì¸í„°í˜ì´ìŠ¤ê°€ ë°ì´í„°ë² ì´ìŠ¤ ë¦¬í¬ì§€í† ë¦¬ì„ì„ ì•Œë ¤ì¤€ë‹¤.

> **`<TimeManagementSystem, Long>`**ì€ Spring Data JPAì—ì„œ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ **`JpaRepository`**ì˜ ì œë„¤ë¦­ íƒ€ì… ë§¤ê°œë³€ìˆ˜ì´ë‹¤. ì´ ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ì´ í•´ì„ëœë‹¤.
>
> - **`TimeManagementSystem`**: ì´ ë¶€ë¶„ì€ ì—”í‹°í‹° í´ë˜ìŠ¤ì˜ íƒ€ì…ì…ë‹ˆë‹¤. ì¦‰, **`TimeManagementSystem`** ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.
> - **`Long`**: ì´ ë¶€ë¶„ì€ ì—”í‹°í‹°ì˜ ê¸°ë³¸ í‚¤(primary key)ì˜ ë°ì´í„° íƒ€ì…ì´ë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš°, ì—”í‹°í‹°ì˜ ê¸°ë³¸ í‚¤ëŠ” ìˆ«ì í˜•ì‹ìœ¼ë¡œ ì£¼ë¡œ **`Long`** ë˜ëŠ” **`Integer`**ì™€ ê°™ì€ ì •ìˆ˜ í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ”ë°,
>   ë”°ë¼ì„œ ë¦¬í¬ì§€í† ë¦¬ê°€ ì´ ì—”í‹°í‹°ì˜ ê¸°ë³¸ í‚¤ë¥¼ ë‹¤ë£¨ëŠ” ë° ì‚¬ìš©ë‹¤.
>
> Spring Data JPAëŠ” ì œë„¤ë¦­ íƒ€ì… ë§¤ê°œë³€ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ì—”í‹°í‹°ì™€ ê¸°ë³¸ í‚¤ì˜ íƒ€ì…ì„ ì§€ì •í•˜ì—¬ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ìƒì„±í•˜ê³ , ê°œë°œìê°€ ë³„ë„ë¡œ SQL ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ê¸°ë³¸ì ì¸ CRUD(Create, Read, Update, Delete) ì‘ì—…ì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤. ë”°ë¼ì„œ **`JpaRepository<TimeManagementSystem, Long>`**ë¥¼ í™•ì¥í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ë©´, **`TimeManagementSystem`** ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ì‰½ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ëœë‹¤!

## 1-3. **ë©”ì„œë“œ ì •ì˜**:

```java
  void deleteByStaff(Staff staff);
```

- **`TimeManagementRepository`** ì¸í„°í˜ì´ìŠ¤ì—ëŠ” ì¶”ê°€ ì¿¼ë¦¬ ë©”ì„œë“œê°€ ì •ì˜ë˜ì–´ ìˆë‹¤.
- ì´ ë©”ì„œë“œëŠ” **`deleteByStaff`**ë¡œ ì •ì˜ë˜ì–´ ìˆìœ¼ë©°, **`Staff`** ì—”í‹°í‹° ê°ì²´ë¥¼ ë°›ì•„ í•´ë‹¹í•˜ëŠ” **`TimeManagementSystem`** ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ì—­í• ì„ í•œë‹¤.

<aside>
ğŸ“ ì´ ë¦¬í¬ì§€í† ë¦¬ ì¸í„°í˜ì´ìŠ¤ëŠ” Spring Data JPAë¥¼ í™œìš©í•˜ì—¬ **`TimeManagementSystem`** ì—”í‹°í‹°ì™€ ìƒí˜¸ ì‘ìš©í•˜ê¸° ìœ„í•œ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ê³  ìˆë‹¤. 
JpaRepositoryë¥¼ ìƒì†í•˜ë©´ ì¼ë°˜ì ì¸ CRUD(Create, Read, Update, Delete) ì—°ì‚°ì„ ìœ„í•œ ë©”ì„œë“œë“¤ì„ ìë™ìœ¼ë¡œ ì œê³µë°›ê²Œ ë˜ë©°, í•„ìš”ì— ë”°ë¼ ì¶”ê°€ì ì¸ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤! 
ì´ë ‡ê²Œ ì •ì˜ëœ ë©”ì„œë“œëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ì‚°ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ Spring Data JPAì— ì˜í•´ êµ¬í˜„ëœë‹¤.

</aside>

# service

---

> ì´ ì½”ë“œëŠ” Spring í”„ë ˆì„ì›Œí¬ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì„œë¹„ìŠ¤(Service) í´ë˜ìŠ¤ì¸ **`TimeManagementService`**ë¥¼ ì •ì˜í•œ ê²ƒì…ë‹ˆë‹¤. **`TimeManagementService`**ëŠ” **`TimeManagementRepository`** ë° **`StaffRepository`**ì™€ í•¨ê»˜ **`TimeManagementSystem`** ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì½”ë“œë¥¼ ìì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

## 1-1. **íŒ¨í‚¤ì§€ì™€ ì„í¬íŠ¸**:

```java
package com.project.backend.service.timemanagement;

import com.project.backend.entity.Staff;
import com.project.backend.entity.timeManagementSystem.TimeManagementSystem;
import com.project.backend.repository.StaffRepository;
import com.project.backend.repository.TimeManagementRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
```

- **`com.project.backend.service.timemanagement`** íŒ¨í‚¤ì§€ì— ìœ„ì¹˜í•œ í´ë˜ìŠ¤ì´ë‹¤.
- **`import`** ë¬¸ì„ í†µí•´ ë‹¤ë¥¸ í´ë˜ìŠ¤ ë° ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë°
  ì—¬ê¸°ì„œëŠ” **`Staff`**, **`TimeManagementSystem`** ì—”í‹°í‹°, **`StaffRepository`**, **`TimeManagementRepository`**, ê·¸ë¦¬ê³  Springì˜ **`Autowired`**ì™€ **`Service`** ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì ¸ì˜¨ë‹¤.

## 1-2. **TimeManagementService í´ë˜ìŠ¤ ì •ì˜**:

```java
@Service
public class TimeManagementService {
}
```

- **`TimeManagementService`** í´ë˜ìŠ¤ëŠ” Springì—ì„œ ê´€ë¦¬ë˜ëŠ” ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ì„ì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ **`@Service`** ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•œë‹¤.

## 1-3. **ìƒì„±ìì™€ ì˜ì¡´ì„± ì£¼ì…**:

```java
private final TimeManagementRepository timeManagementRepository;

  @Autowired
  private StaffRepository staffRepository;

  public TimeManagementService(TimeManagementRepository timeManagementRepository) {
    this.timeManagementRepository = timeManagementRepository;
  }
```

- **`TimeManagementRepository`**ì™€ **`StaffRepository`** ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•„ë“œë¡œ ì„ ì–¸í•˜ê³ , **`@Autowired`** ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ **`StaffRepository`**ë¥¼ ì£¼ì…ë°›ëŠ”ë‹¤.
  **`TimeManagementService`** í´ë˜ìŠ¤ê°€ ìƒì„±ë  ë•Œ **`TimeManagementRepository`**ê°€ ì£¼ì…ë˜ì–´ ì˜ì¡´ì„±ì„ í•´ê²°í•œë‹¤.

## 1-4. **createTimeManagementEntity ë©”ì„œë“œ**:

```java
public void createTimeManagementEntity(Staff staff) {
    TimeManagementSystem timeManagementSystem = new TimeManagementSystem();

    // TimeManagementSystemì— Staff ê°ì²´ë¥¼ ì—°ê²°
    timeManagementSystem.setStaff(staff);

    // Staff ì—”í„°í‹°ì˜ ì •ë³´ë¥¼ ë³µì‚¬í•˜ì—¬ TimeManagementSystem ì—”í„°í‹°ì— ì„¤ì •
    timeManagementSystem.setEmpNum(staff.getEmpNum());
    timeManagementSystem.setEmpId(staff.getEmpId());
    // (ë‚˜ë¨¸ì§€ Staff ì—”í„°í‹°ì˜ ì •ë³´ë„ ë³µì‚¬)

    // TimeManagementSystem ì—”í„°í‹°ë¥¼ ì €ì¥
    timeManagementRepository.save(timeManagementSystem);
}
```

- **`createTimeManagementEntity`** ë©”ì„œë“œëŠ” **`Staff`** ì—”í‹°í‹°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ **`TimeManagementSystem`** ì—”í‹°í‹°ë¥¼ ìƒì„±í•˜ê³  ì €ì¥í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
  Staff ê°ì²´ì˜ ì •ë³´ë¥¼ TimeManagementSystemìœ¼ë¡œ ë³µì‚¬í•˜ì—¬ ê´€ê³„ë¥¼ ì„¤ì •í•˜ê³  ì €ì¥í•œë‹¤.

```java
public Staff registerStaff(StaffDto staffDto) {
    Staff staff = new Staff();

    staff.setEmpNum(staffDto.getEmpNum());
    staff.setEmpId(staffDto.getEmpId());
    staff.setEmpPwd(passwordEncoder.encode(staffDto.getEmpPwd()));
    staff.setDept(staffDto.getDept());
    staff.setPosition(staffDto.getPosition());
    staff.setEmpName(staffDto.getEmpName());
    staff.setBirthDate(staffDto.getBirthDate());
    staff.setPhoneNumber(staffDto.getPhoneNumber());
    staff.setAddress(staffDto.getAddress());
    staff.setEmail(staffDto.getEmail());
    staff.setBankName(staffDto.getBankName());
    staff.setAccountNumber(staffDto.getAccountNumber());

    // ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” í›„ ì €ì¥
    staff.setEncodedEmpPwd(staff.getEmpPwd());

    Staff savedStaff = staffRepository.save(staff);

    // TimeManagementSystem ê°ì²´ë¥¼ ìƒì„± ë° ì €ì¥
    timeManagementService.createTimeManagementEntity(savedStaff);

    return savedStaff;
  }
```

ìœ„ì—ëŠ” staff service ì½”ë“œì´ë‹¤.

í•´ë‹¹ ì½”ë“œ ì•ˆì—ì„œ ì§ì›ì„ ì¶”ê°€í•  ë•Œ ê·¼íƒœê´€ë¦¬ì— ë“¤ì–´ê°ˆ ì§ì› ë°ì´í„°ë„ ìë™ìœ¼ë¡œ ì¶”ê°€ë˜ê²Œ ë¡œì§ì„ êµ¬ì„±í–ˆë‹¤.

## 1-5. **deleteStaffAndTimeManagementSystem ë©”ì„œë“œ**:

```java
public void deleteStaffAndTimeManagementSystem(Long empNum) {
    Staff staff = staffRepository.findById(empNum).orElse(null);
    if (staff != null) {
      timeManagementRepository.deleteByStaff(staff);
      staffRepository.deleteById(empNum);
    }
}
```

- **`deleteStaffAndTimeManagementSystem`** ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ **`empNum`**ì„ ê¸°ë°˜ìœ¼ë¡œ Staffì™€ TimeManagementSystem ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤.
  Staff ì—”í‹°í‹°ë¥¼ ë¨¼ì € ì¡°íšŒí•˜ê³ , Staffê°€ ì¡´ì¬í•˜ë©´ ê´€ë ¨ëœ TimeManagementSystem ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³  Staff ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤.

## 1-6. **deleteByStaff ë©”ì„œë“œ**:

```java
public void deleteByStaff(Staff staff) {
    timeManagementRepository.deleteByStaff(staff);
}
```

- **`deleteByStaff`** ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ Staff ì—”í‹°í‹°ì™€ ì—°ê´€ëœ TimeManagementSystem ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤.

1. **`findAll`, `findById`, `save`, `deleteById` ë©”ì„œë“œ**:

- **`findAll`**: ëª¨ë“  TimeManagementSystem ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ.
- **`findById`**: íŠ¹ì • IDì— í•´ë‹¹í•˜ëŠ” TimeManagementSystem ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ.
- **`save`**: TimeManagementSystem ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë©”ì„œë“œ.
- **`deleteById`**: íŠ¹ì • IDì˜ TimeManagementSystem ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ë©”ì„œë“œ.

ì´ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ëŠ” **`TimeManagementRepository`**ì™€ **`StaffRepository`**ë¥¼ ì‚¬ìš©í•˜ì—¬ TimeManagementSystemê³¼ Staff ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
ì´ë¥¼ í†µí•´ ë°ì´í„°ì˜ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ë“±ì„ ê´€ë¦¬í•˜ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„ í–ˆë‹¤.

<aside>
ğŸ’¡

```java
**public void deleteStaffAndTimeManagementSystem(Long empNum)  // 1ë²ˆ**
```

```java
**public void deleteByStaff(Staff staff)  // 2ë²ˆ**
```

ìœ„ì˜ ë‘ ë©”ì„œë“œëŠ” ë¹„ìŠ·í•œ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆë‹¤.

1. **public void deleteStaffAndTimeManagementSystem(Long empNum)**

   - ì´ ë©”ì„œë“œëŠ” **`empNum`**ì„ ê¸°ë°˜ìœ¼ë¡œ **`Staff`** ì—”í„°í‹°ë¥¼ ì°¾ëŠ”ë‹¤.
   - **`staff`**ê°€ **`null`**ì´ ì•„ë‹ˆë¼ë©´, í•´ë‹¹ ì§ì›ê³¼ ê´€ë ¨ëœ ê·¼íƒœê´€ë¦¬ ì‹œìŠ¤í…œ ë°ì´í„°ë¥¼ **`timeManagementRepository.deleteByStaff(staff)`**ë¥¼ í†µí•´ ì‚­ì œí•œë‹¤.
   - ê·¸ëŸ° ë‹¤ìŒ, **`staffRepository.deleteById(empNum)`**ì„ ì‚¬ìš©í•˜ì—¬ ì§ì› ì—”í„°í‹°ë¥¼ ì‚­ì œí•˜ë„ë¡ ë˜ì–´ìˆë‹¤.

1. **public void deleteByStaff(Staff staff)**
   - ì´ ë©”ì„œë“œëŠ” íŠ¹ì • **`Staff`** ì—”í„°í‹°ë¥¼ ë°›ì•„ì™€ì„œ, í•´ë‹¹ ì§ì›ê³¼ ê´€ë ¨ëœ ê·¼íƒœê´€ë¦¬ ì‹œìŠ¤í…œ ë°ì´í„°ë¥¼ **`timeManagementRepository.deleteByStaff(staff)`**ë¥¼ í†µí•´ ì‚­ì œí•œë‹¤.

ë‘ ë©”ì„œë“œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¹„ìŠ·í•œ ë™ì‘ì„ í•˜ì§€ë§Œ ì°¨ì´ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:

- **`deleteStaffAndTimeManagementSystem`** ë©”ì„œë“œëŠ” ì§ì›ì˜ **`empNum`**ì„ ê¸°ë°˜ìœ¼ë¡œ ì§ì›ì„ ì°¾ì•„ ì‚­ì œí•˜ëŠ” ë°ì— ì‚¬ìš©ëœë‹¤.
  ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ í•´ë‹¹ **`empNum`**ì„ ê°€ì§„ ì§ì›ê³¼ ê´€ë ¨ëœ ëª¨ë“  ê·¼íƒœê´€ë¦¬ ì‹œìŠ¤í…œ ë°ì´í„°ì™€ ì§ì› ë°ì´í„°ê°€ ì‚­ì œëœë‹¤.
- **`deleteByStaff`** ë©”ì„œë“œëŠ” ì§ì› ì—”í„°í‹°ë¥¼ ì§ì ‘ ì „ë‹¬ë°›ì•„ í•´ë‹¹ ì§ì›ê³¼ ê´€ë ¨ëœ ê·¼íƒœê´€ë¦¬ ì‹œìŠ¤í…œ ë°ì´í„°ë¥¼ ì‚­ì œí•œë‹¤. ì´ ë©”ì„œë“œëŠ” ì§ì› ì—”í„°í‹°ë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, í•´ë‹¹ ì§ì›ê³¼ ê´€ë ¨ëœ ê·¼íƒœê´€ë¦¬ ì‹œìŠ¤í…œ ë°ì´í„°ë§Œ ì‚­ì œí•œë‹¤.

ë”°ë¼ì„œ, ìƒí™©ê³¼ ì‚¬ìš© ëª©ì ì— ë”°ë¼ ë‘ ë©”ì„œë“œ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ë§Œì•½ íŠ¹ì • ì§ì›ê³¼ ê´€ë ¨ëœ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œ í•˜ë ¤ë©´ **`deleteStaffAndTimeManagementSystem`**ì„ ì‚¬ìš©í•˜ê³ , ë‹¨ìˆœíˆ íŠ¹ì • ì§ì›ì˜ ê·¼íƒœê´€ë¦¬ ì‹œìŠ¤í…œ ë°ì´í„°ë§Œ ì‚­ì œí•˜ë ¤ë©´ **`deleteByStaff`**ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

í•˜ì§€ë§Œ ê·¼íƒœì •ì‚°ì˜ ê²½ìš°ì—ëŠ” ì„œë¡œ í…Œì´ë¸”ì´ ì—°ê´€ê´€ê³„ ë§¤í•‘ì´ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì§ì›ì—ì„œ ë°ì´í„° ì‚­ì œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ â†’ ì§ì› ë°ì´í„° ë¨¼ì € ì‚­ì œ â†’ ì§ì› ë°ì´í„° ì‚­ì œ ìˆœìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤.

</aside>

1. ë°ì´í„° ì¼ê´€ì„± ìœ ì§€: Staff ì—”í‹°í‹°ì™€ TimeManagementSystem ì—”í‹°í‹° ê°„ì—ëŠ” ê´€ê³„ê°€ ìˆì„ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. Staffë¥¼ ì‚­ì œí•  ë•Œ ê´€ë ¨ëœ TimeManagementSystem ë°ì´í„°ë„ ì‚­ì œí•´ì•¼ í•©ë‹ˆë‹¤. ë‘ ë©”ì„œë“œë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ Staffë¥¼ ì‚­ì œí•  ë•Œ ì—°ê´€ëœ TimeManagementSystem ë°ì´í„°ë„ ì•ˆì „í•˜ê²Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. ì½”ë“œ ì¤‘ë³µ ë°©ì§€: **`deleteByStaff(Staff staff)`** ë©”ì„œë“œëŠ” Staff ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ TimeManagementSystem ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. Staff ì—”í‹°í‹°ë¥¼ ì‚­ì œí•  ë•Œë§ˆë‹¤ ì´ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì—°ê´€ëœ TimeManagementSystem ë°ì´í„°ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì½”ë“œ ì¤‘ë³µì„ ë°©ì§€í•˜ê³  ìœ ì§€ë³´ìˆ˜ë¥¼ ìš©ì´í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.
3. ê´€ë ¨ ì—”í‹°í‹° ê°„ì˜ ì‘ì—… ì¼ê´€ì„±: ë‘ ë©”ì„œë“œë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ Staffì™€ ê´€ë ¨ëœ ëª¨ë“  ì‘ì—…ì„ ì¼ê´€ë˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Staffë¥¼ ì‚­ì œí•˜ëŠ” ë™ì‹œì— TimeManagementSystem ë°ì´í„°ë„ ì‚­ì œí•˜ê±°ë‚˜ Staff ì—”í‹°í‹°ì˜ ë‹¤ë¥¸ ë³€ê²½ ì‚¬í•­ê³¼ ê´€ë ¨ëœ ëª¨ë“  ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ Staff ì—”í‹°í‹°ì™€ TimeManagementSystem ì—”í‹°í‹° ê°„ì˜ ê´€ê³„ë¥¼ ë‹¤ë£° ë•Œ ë‘ ë©”ì„œë“œë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ ì ‘ê·¼ ë°©ë²•ì…ë‹ˆë‹¤. ì´ê²ƒì€ ë°ì´í„°ë² ì´ìŠ¤ ê´€ê³„ë¥¼ ìœ ì§€í•˜ê³  ë°ì´í„° ì¼ê´€ì„±ì„ ë³´ì¥í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

.

## entity

```java
// ë‹¹ì›”ì˜ í‰ì¼ ì¼ìˆ˜ ê³„ì‚° ë©”ì„œë“œ
public int calculateWeekdaysInMonth(int year, int month) {
  YearMonth yearMonth = YearMonth.of(year, month);
  LocalDate firstDayOfMonth = yearMonth.atDay(1);
  LocalDate lastDayOfMonth = yearMonth.atEndOfMonth();

  int weekdays = 0;
  LocalDate currentDate = firstDayOfMonth;

  while (!currentDate.isAfter(lastDayOfMonth)) {
    if (currentDate.getDayOfWeek().getValue() >= 1 && currentDate.getDayOfWeek().getValue() <= 5) {
      weekdays++;
    }
    currentDate = currentDate.plusDays(1);
  }
  return weekdays;
}

// ë‹¹ì›” í‰ì¼ì¼ìˆ˜ x 8ì„ ì†Œì •ê·¼ë¡œì‹œê°„ í•„ë“œì— ì„¤ì •í•˜ëŠ” ë©”ì„œë“œ
public void updateWorkingHours() {
  int year = YearMonth.now().getYear();
  int month = YearMonth.now().getMonthValue();

  int weekdaysInMonth = calculateWeekdaysInMonth(year, month);
  this.workingHours = weekdaysInMonth * 8;
}

// ì´ˆê¸°í™” ë©”ì„œë“œì—ì„œ ê°’ì„ ê³„ì‚°í•˜ì—¬ í•„ë“œì— ì„¤ì •
@PrePersist
@PreUpdate
public void initializeValues() {
  int year = YearMonth.now().getYear();
  int month = YearMonth.now().getMonthValue();

  int weekdaysInMonth = calculateWeekdaysInMonth(year, month);
  this.workingDays = weekdaysInMonth;
  this.actualWorkDays = weekdaysInMonth; // ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •

  updateWorkingHours(); // ì†Œì •ê·¼ë¡œì‹œê°„ ì—…ë°ì´íŠ¸
}
```

> **í‰ì¼ ì¼ìˆ˜ ê³„ì‚° ë©”ì„œë“œ**: **`calculateWeekdaysInMonth`** ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ ì—°ë„ì™€ ì›”ì— ëŒ€í•´ í‰ì¼(ì›”ìš”ì¼ ~ ê¸ˆìš”ì¼)ì˜ ì¼ìˆ˜ë¥¼ ê³„ì‚°í•œë‹¤.
> ì´ ë©”ì„œë“œëŠ” ë‹¹ì›”ì˜ í‰ì¼ ì¼ìˆ˜ë¥¼ ê³„ì‚°í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, ì—°ë„ì™€ ì›”ì„ ê¸°ë°˜ìœ¼ë¡œ ì²« ë‚ ë¶€í„° ë§ˆì§€ë§‰ ë‚ ê¹Œì§€ ìˆœí™˜í•˜ë©´ì„œ ê° ë‚ ì§œì˜ ìš”ì¼ì„ í™•ì¸í•˜ì—¬ í‰ì¼ì¸ ê²½ìš° ì¹´ìš´íŠ¸í•œë‹¤.

1. **ì†Œì •ê·¼ë¡œì‹œê°„ ì—…ë°ì´íŠ¸ ë©”ì„œë“œ**: **`updateWorkingHours`** ë©”ì„œë“œëŠ” í‰ì¼ ì¼ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì†Œì •ê·¼ë¡œì‹œê°„ì„ ì—…ë°ì´íŠ¸í•œë‹¤. ë‹¹ì›”ì˜ í‰ì¼ ì¼ìˆ˜ë¥¼ ê³„ì‚°í•˜ì—¬ 8ì‹œê°„ì„ ê³±í•˜ì—¬ ì†Œì •ê·¼ë¡œì‹œê°„ í•„ë“œë¥¼ ì„¤ì •í•œë‹¤.
2. **ì´ˆê¸°í™” ë©”ì„œë“œ**: **`initializeValues`** ë©”ì„œë“œëŠ” ì—”í„°í‹°ê°€ ìƒì„±ë˜ê±°ë‚˜ ì—…ë°ì´íŠ¸ë  ë•Œ ìë™ìœ¼ë¡œ í˜¸ì¶œë˜ë©°, í•„ë“œì˜ ì´ˆê¸°ê°’ì„ ì„¤ì •í•œë‹¤.
   ì´ ë©”ì„œë“œëŠ” **`calculateWeekdaysInMonth`** ë° **`updateWorkingHours`** ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬ **`workingDays`**, **`actualWorkDays`**, ë° **`workingHours`** í•„ë“œë¥¼ ì„¤ì •ë‹¤.

ì´ëŸ¬í•œ ë©”ì„œë“œë“¤ì€ ê·¼íƒœì •ì‚° ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ê³ , ì—…ë°ì´íŠ¸í•˜ë©°, ì†Œì •ê·¼ë¡œì‹œê°„ì„ ê³„ì‚°í•˜ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•œë‹¤!
