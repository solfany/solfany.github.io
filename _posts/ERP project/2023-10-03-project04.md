---
title: "[ERP project] ê¸‰ì—¬ì •ì‚°"
categories:
  - Erp
tags: [ERP project]
toc_sticky: true
toc_label: "ëª©ë¡"
toc_icon: "bars"
---

![image](https://github.com/solfany/Spring-board-project/assets/123814718/4b3f1ad9-a3b8-46c3-9998-cba68ecca95b)

# ìœ ìŠ¤ì¼€ì´ìŠ¤

![image](https://github.com/solfany/Spring-board-project/assets/123814718/ad691702-eaf8-4acb-96b4-7b1cd154b4f1)

ğŸ“ í•´ë‹¹ ì½”ë“œëŠ” **`PayManagementSystemManagement`**ë¼ëŠ” React ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ì˜í•˜ê³  ìˆìœ¼ë©°, ê¸‰ì—¬ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ ì›¹ í˜ì´ì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ì´ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ì£¼ìš” ê¸°ëŠ¥ì„ ê°„ëµí•˜ê²Œ ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.. ğŸ‘‡ğŸ»

### **1. ê¸‰ì—¬ ë°ì´í„° í‘œì‹œ ë° ê´€ë¦¬**

- APIë¥¼ í˜¸ì¶œí•˜ì—¬ **`/api/timeManagement`**ì—ì„œ ì§ì› ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ í…Œì´ë¸” í˜•íƒœë¡œ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.
  ê° ì§ì›ì— ëŒ€í•œ ì •ë³´ë¡œëŠ” ì‚¬ì›ë²ˆí˜¸, ì´ë¦„, ë¬´ê¸‰íœ´ê°€ì¼ìˆ˜, ìœ ê¸‰íœ´ê°€ì¼ìˆ˜, ì‹¤ì œê·¼ë¡œì¼ìˆ˜, ì‹¤ì œê·¼ë¡œì‹œê°„, ì´ë©”ì¼, ì§€ê¸‰ ì—¬ë¶€ ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤.
- ì´ í…Œì´ë¸”ì€ **`@coreui/react`** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### **2. ê¸‰ì—¬ ì§€ê¸‰ ì—¬ë¶€ ê´€ë¦¬**

- í…Œì´ë¸”ì˜ ê° í–‰ì—ëŠ” ê¸‰ì—¬ ì§€ê¸‰ ë²„íŠ¼ì´ ìˆìŠµë‹ˆë‹¤.
  ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì‚¬ìš©ìì—ê²Œ í™•ì¸ ë©”ì‹œì§€ê°€ í‘œì‹œë˜ê³ , "í™•ì¸"ì„ ì„ íƒí•˜ë©´ í•´ë‹¹ ì§ì›ì˜ ê¸‰ì—¬ ì§€ê¸‰ ìƒíƒœê°€ "yes"ë¡œ ë³€ê²½ëœë‹¤.
  ì´ ë³€ê²½ì€ í…Œì´ë¸”ì˜ í•´ë‹¹ í–‰ì— ì¦‰ì‹œ ë°˜ì˜ë©ë‹ˆë‹¤.

### **3. ê°œë³„ ì§ì› ê¸‰ì—¬ ì •ë³´ PDF ë‹¤ìš´ë¡œë“œ**

- í…Œì´ë¸”ì˜ ê° í–‰ ë§ˆì§€ë§‰ì—ëŠ” PDF ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì´ ìˆìŠµë‹ˆë‹¤..
  ì´ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ì§ì›ì˜ ê¸‰ì—¬ ì •ë³´ê°€ PDF í˜•ì‹ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ ë©ë‹ˆë‹¤..
  ì´ ê¸°ëŠ¥ì€ **`Pdf`** ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ì œê³µë˜ê³  ìˆìŠµë‹ˆë‹¤.

**ìš”ì•½í•˜ìë©´, ì´ ì»´í¬ë„ŒíŠ¸ëŠ” ì§ì›ì˜ ê¸‰ì—¬ ì •ë³´ë¥¼ í…Œì´ë¸” í˜•íƒœë¡œ í‘œì‹œí•˜ê³ , ê° ì§ì›ì˜ ê¸‰ì—¬ ì§€ê¸‰ ì—¬ë¶€ë¥¼ ê´€ë¦¬í•˜ë©°, ê° ì§ì›ì˜ ê¸‰ì—¬ ì •ë³´ë¥¼ PDF í˜•ì‹ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.**

<br>
<br>

# front-end

## 1. ì„œë²„ì—ì„œ ë°ì´í„° ë°›ì•„ì˜¤ê¸°

```jsx
useEffect(() => {
  fetch("/api/timeManagement")
    .then((response) => response.json())
    .then((data) => {
      setUsers(data);
    });
}, []);

useEffect(() => {
  setRows(
    users.map((user) => [
      user.empNum, //ì‚¬ì›ë²ˆí˜¸
      user.empName, //ì‚¬ì›ì´ë¦„
      user.unpaid, //ë¬´ê¸‰íœ´ê°€
      user.vacation, //ìœ ê¸‰íœ´ê°€
      user.actualWorkDays, //ì‹¤ì œê·¼ë¡œì¼ìˆ˜
      user.workingHours, //ì‹¤ì œê·¼ë¡œì‹œê°„
      user.email, //ì´ë©”ì¼
      "no", //ì§€ê¸‰ì—¬ë¶€ ì´ˆê¹ƒê°’
    ])
  );
}, [users]);
```

> Reactì—ì„œ ì‚¬ìš©ë˜ëŠ” **`useEffect`** í›…ì„ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ê°€ê³µí•©ë‹ˆë‹¤.

### 1-1. **ì²« ë²ˆì§¸ useEffect**

```jsx
useEffect(() => {
  fetch("/api/timeManagement")
    .then((response) => response.json())
    .then((data) => {
      setUsers(data);
    });
}, []);
```

> í•´ë‹¹ í›…ì€ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ ë  ë•Œ (**`[]`** ë¹ˆ ì¢…ì†ì„± ë°°ì—´ ë•Œë¬¸ì—) **`/api/timeManagement`** URLì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. â†’
>
> ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ JSON í˜•íƒœë¡œ ë³€í™˜í•œ í›„, **`setUsers`**ë¥¼ í†µí•´ **`users`** ìƒíƒœë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

### 1-2. **ë‘ ë²ˆì§¸ useEffect**

```jsx
useEffect(() => {
  setRows(
    users.map((user) => [
      user.empNum, //ì‚¬ì›ë²ˆí˜¸
      user.empName, //ì‚¬ì›ì´ë¦„
      user.unpaid, //ë¬´ê¸‰íœ´ê°€
      user.vacation, //ìœ ê¸‰íœ´ê°€
      user.actualWorkDays, //ì‹¤ì œê·¼ë¡œì¼ìˆ˜
      user.workingHours, //ì‹¤ì œê·¼ë¡œì‹œê°„
      user.email, //ì´ë©”ì¼
      "no", //ì§€ê¸‰ì—¬ë¶€ ì´ˆê¹ƒê°’
    ])
  );
}, [users]);
```

<br>

> ì´ í›…ì€ **`users`** ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤.
> **`users`** ë°°ì—´ì˜ ê° ì‚¬ìš©ìì— ëŒ€í•´ ë°°ì—´ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì¬êµ¬ì„±í•˜ê³ , ì´ë¥¼ **`setRows`**ë¥¼ ì‚¬ìš©í•˜ì—¬ **`rows`** ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

ğŸ’¡ ê²°ë¡ ì ìœ¼ë¡œ, ì´ ì½”ë“œëŠ” APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ í›„, ê·¸ ë°ì´í„°ë¥¼ ë‹¤ë¥¸ í˜•íƒœë¡œ ì¬êµ¬ì„±í•˜ì—¬ **rows** ìƒíƒœì— ì €ì¥í•©ë‹ˆë‹¤.

## 2. ê¸‰ì—¬ ì§€ê¸‰ ì—¬ë¶€ ê´€ë¦¬

```jsx
const handlePayClick = (index) => {
  const confirmed = window.confirm("ê²°ì œ ì™„ë£Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
  if (confirmed) {
    alert("ê²°ì œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
    const newRows = [...rows];
    newRows[index][7] = "yes";
    setRows(newRows);
  } else {
    alert("ì·¨ì†Œ ë˜ì—ˆìŠµë‹ˆë‹¤.");
  }
};
```

> **handlePayClick** í•¨ìˆ˜ëŠ” ì‚¬ìš©ìì˜ ì¸í„°ë™ì…˜ì— ë”°ë¼ ë°ì´í„°ë¥¼
> ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.!
> ì‚¬ìš©ìê°€ ê¸‰ì—¬ë¥¼ ì§€ê¸‰í•˜ë„ë¡ ì„ íƒí•  ê²½ìš°,
> í•´ë‹¹ ë°ì´í„°ê°€ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ë˜ì–´ ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤..

### 2-1. í•¨ìˆ˜ ì¸ì â€˜indexâ€™

```jsx
const handlePayClick = (index) => { ... }
```

> ì´ í•¨ìˆ˜ëŠ” **`index`**ë¼ëŠ” ì¸ìë¥¼ ë°›ìŠµë‹ˆë‹¤. **`index`**ëŠ” í˜„ì¬ í´ë¦­í•œ ì§ì›ì˜ í…Œì´ë¸” í–‰ ë²ˆí˜¸ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤..
> ì´ë¥¼ í†µí•´ íŠ¹ì • ì§ì›ì˜ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **2-2. ì‚¬ìš©ìì—ê²Œ ê¸‰ì—¬ ì§€ê¸‰ ì—¬ë¶€ í™•ì¸**

```jsx
const confirmed = window.confirm("ê²°ì œ ì™„ë£Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
```

> **`window.confirm`** í•¨ìˆ˜ëŠ” ì‚¬ìš©ìì—ê²Œ í™•ì¸ ëŒ€í™”ìƒìë¥¼ í‘œì‹œí•˜ê³ , "í™•ì¸" ë˜ëŠ” "ì·¨ì†Œ" ë²„íŠ¼ì„ í†µí•´ ì‚¬ìš©ìì˜ ì‘ë‹µì„ ë°›ëŠ”ë‹¤.
> ì‚¬ìš©ìê°€ "í™•ì¸"ì„ í´ë¦­í•˜ë©´ **`true`**ë¥¼ ë°˜í™˜í•˜ê³ , "ì·¨ì†Œ"ë¥¼ í´ë¦­í•˜ë©´ **`false`**ë¥¼ ë°˜í™˜í•œë‹¤.

### 2-**3. ê¸‰ì—¬ ì§€ê¸‰ ìƒíƒœ ì—…ë°ì´íŠ¸**

```jsx
javascriptCopy code
if (confirmed) {
    alert("ê²°ì œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
    const newRows = [...rows];
    newRows[index][7] = "yes";
    setRows(newRows);
}
```

> **`...rows`**ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ í˜„ì¬ì˜ **`rows`** ë°°ì—´ì„ ë³µì‚¬í•˜ëŠ” ê²ƒì´ë‹¤.
> ì´ë¥¼ "_spread operator_"ë¼ê³  ë¶€ë¥´ë©°, ë°°ì—´ ë˜ëŠ” ê°ì²´ì˜ ë‚´ìš©ì„ ìƒˆ ë°°ì—´ ë˜ëŠ” ê°ì²´ë¡œ ë³µì‚¬í•œë‹¤.  
> â†’ ì´ë ‡ê²Œ í•˜ëŠ” ì´ìœ ëŠ” ìƒíƒœë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ ë°°ì—´ì„ ìƒì„±í•˜ì—¬ ìƒíƒœë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´
> Reactì˜ ê¶Œì¥ ì‚¬í•­ì´ê¸° ë•Œë¬¸ì´ë‹¤.

> **`newRows[index][7] = "yes";`**ì—ì„œ **`index`**ëŠ” í˜„ì¬ í´ë¦­í•œ ì§ì›ì˜ í–‰ ë²ˆí˜¸ë¥¼ ë‚˜íƒ€ë‹¤.
> **`[7]`**ì€ í•´ë‹¹ ì§ì›ì˜ "ì§€ê¸‰ ì—¬ë¶€" ë°ì´í„°ê°€ ì €ì¥ëœ ì—´(column) ë²ˆí˜¸ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
> ì¦‰, ì„ íƒëœ ì»¬ëŸ¼ì˜ ê¸‰ì—¬ "ì§€ê¸‰ ì—¬ë¶€"ë¥¼ "yes"ë¡œ ë³€ê²½í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

> **`setRows(newRows);`**ëŠ” **`setRows`**ë¼ëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ **`rows`** ìƒíƒœë¥¼ **`newRows`**ë¡œ ì—…ë°ì´íŠ¸í•œë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ UIì— ê¸‰ì—¬ê°€ ì§€ê¸‰ì´ ëœ ìƒíƒœì˜ (ë³€ê²½ ëœ) ë‚´ìš©ì´ ë°˜ì˜ëœë‹¤.

### 2- **4. ì§€ê¸‰ ì·¨ì†Œ**

```jsx
else {
    alert("ì·¨ì†Œ ë˜ì—ˆìŠµë‹ˆë‹¤.");
}
```

> ì„œë¹„ìŠ¤ ì´ìš© ì‹œ ì‹¤ìˆ˜ë¡œ ëˆŒë €ì„ ê²½ìš°ë¥¼ ê³ ë ¤í•˜ì—¬ ì·¨ì†Œë„ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.
> ë§Œì•½ ì‚¬ìš©ìê°€ ê¸‰ì—¬ ì§€ê¸‰ì„ ì·¨ì†Œí•˜ë©´ "ì·¨ì†Œ ë˜ì—ˆìŠµë‹ˆë‹¤."ë¼ëŠ” ì•Œë¦¼ì´ í‘œì‹œëœë‹¤.

ğŸ’¡ ìš”ì•½í•˜ë©´, **handlePayClick** í•¨ìˆ˜ëŠ” ì‚¬ìš©ìê°€ íŠ¹ì • ì§ì›ì˜ ê¸‰ì—¬ë¥¼ ì§€ê¸‰í•˜ë ¤ê³  í•  ë•Œ í•´ë‹¹ ì§ì›ì˜ "ì§€ê¸‰ ì—¬ë¶€" ë°ì´í„°ë¥¼ "yes"ë¡œ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ì§€ê¸‰ì„ ì·¨ì†Œí•˜ëŠ” ì—­í• ì„ í•œë‹¤.

</aside>

## 3. ê°œë³„ ì§ì› ê¸‰ì—¬ ì •ë³´ \_ QRì½”ë“œê°€ ë‹´ê¸´ PDF ë‹¤ìš´ë¡œë“œ

ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ ë³´ëŸ¬ê°€ê¸° [JsPDF ê¸°ìˆ  ì •ì˜ì„œ ](https://www.notion.so/JsPDF-44df554637e646388068693ea0059ed9?pvs=21)

![image](https://github.com/solfany/Spring-board-project/assets/123814718/3769f760-f321-4ea7-82e6-8f5b79609d05)

![image](https://github.com/solfany/Spring-board-project/assets/123814718/0ced92cf-af98-4e41-8c49-7a56a27d0b2f)

ğŸ“ **ê¸°ëŠ¥ ë° íŠ¹ì§• ì„¤ëª…**:

1. **QR ì½”ë“œ ìƒì„±**: **`generateQrCode`** í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ PDF íŒŒì¼ì˜ URLì„ ì…ë ¥í•˜ë©´ í•´ë‹¹ URLì„ ê¸°ë°˜ìœ¼ë¡œ QR ì½”ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ QR ì½”ë“œëŠ” PDFì— ì¶”ê°€ëœë‹¤.
2. **PDF ìƒì„± ë° í¸ì§‘**: **`jsPDF`**ë¥¼ ì‚¬ìš©í•˜ì—¬ PDFë¥¼ ìƒì„±í•˜ê³  ì—¬ëŸ¬ í˜ì´ì§€ì˜ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤.
   í…ìŠ¤íŠ¸, í…Œì´ë¸”, ì´ë¯¸ì§€ ë“±ì„ ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼ê³¼ ìœ„ì¹˜ë¡œ PDFì— ì‚½ì…í•  ìˆ˜ ìˆ.
3. **AutoTable í”ŒëŸ¬ê·¸ì¸**: **`jspdf-autotable`** í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸”ì„ ì‰½ê²Œ ìƒì„±í•˜ê³  ìŠ¤íƒ€ì¼ì„ ì§€ì •í•˜ê³ , ì´ë¥¼ í†µí•´ í…Œì´ë¸”ì„ PDFì— ì¶”ê°€í•˜ê³  ìŠ¤íƒ€ì¼ì„ ì ìš©í•œë‹¤.
4. **QR ì½”ë“œ ì¶”ê°€**: ìƒì„±ëœ QR ì½”ë“œëŠ” PDFì— ì´ë¯¸ì§€ë¡œ ì¶”ê°€ë‹¤.
5. **PDF ì €ì¥ ë° ë‹¤ìš´ë¡œë“œ**: **`doc.save("ê¸‰ì—¬ëª…ì„¸.pdf");`** ì½”ë“œë¥¼ í†µí•´ PDFë¥¼ ì €ì¥í•˜ê³  ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆë‹¤.
</aside>

### 3-1. PDF ìƒì„± í•¨ìˆ˜

```jsx
const generatePdf = async () => {
  const doc = new jsPDF();
  // ... ì¤‘ëµ ...
  doc.save("ê¸‰ì—¬ëª…ì„¸.pdf");
};
```

í•´ë‹¹ ì½”ë“œëŠ” ê¸‰ì—¬ëª…ì„¸ì„œë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.

1.  **`jsPDF`**ë¥¼ ì‚¬ìš©í•˜ì—¬ PDFë¥¼ ìƒì„±í•˜ê³  ì„¤ì •í•œ ì •ë³´ì™€ í‘œë¥¼ PDFì— ì¶”ê°€í•œ ë’¤, **`doc.save("ê¸‰ì—¬ëª…ì„¸.pdf")`**
    ë¥¼ í˜¸ì¶œí•˜ì—¬ PDFë¥¼ ë‹¤ìš´ë¡œë“œ í•œë‹¤.
2.  **`jsPDF`** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•˜ê²Œ PDFë¥¼ ìƒì„±í•œë‹¤.

### 3-2. QRì½”ë“œ ìƒì„± í•¨ìˆ˜

```jsx
const generateQrCode = async (pdfUrl) => {
  try {
    const url = await QRCode.toDataURL(pdfUrl);
    setQrCodeURL(url);
    return url;
  } catch (err) {
    console.error(err);
    return "";
  }
};
```

> ì´ í•¨ìˆ˜ëŠ” PDF ë¬¸ì„œì˜ URLì„ ì…ë ¥ìœ¼ë¡œ ë°›ì•„ QRì½”ë“œ ì´ë¯¸ì§€ì˜ Data URLì„ ìƒì„±í•˜ê³ , ìƒíƒœ ë³€ìˆ˜ **`qrCodeURL`**ì— ì €ì¥í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

ì—¬ê¸°ì— ëŒ€í•œ ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ë‹¤ ğŸ‘‡ğŸ»

> - **`QRCode.toDataURL(pdfUrl)`**ëŠ” **`pdfUrl`**ì„ ì´ìš©í•˜ì—¬ QRì½”ë“œë¥¼ ìƒì„±í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ Data URL í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.
> - **`await`**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸°ë¡œ QRì½”ë“œ ìƒì„±ì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
>   QRì½”ë“œ ìƒì„±ì´ ì™„ë£Œë˜ë©´ ê²°ê³¼ URLì„ **`url`** ë³€ìˆ˜ì— ì €ì¥í•œë‹¤.
> - **`setQrCodeURL(url)`**ì„ ì‚¬ìš©í•˜ì—¬ **`qrCodeURL`** ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ ,
>   ë‚˜ì¤‘ì— ì»´í¬ë„ŒíŠ¸ì—ì„œ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
> - ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ **`try-catch`** ë¸”ë¡ì—ì„œ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ê³  ë¹ˆ ë¬¸ìì—´ì„ ë°˜í™˜í•œë‹¤.

ğŸ’¡ **QRì½”ë“œì™€ PDF ìƒì„± ì›ë¦¬:**

- **QRì½”ë“œ ìƒì„±**: **`QRCode.toDataURL(pdfUrl)`** í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ PDF ë¬¸ì„œì˜ URLì„ ì…ë ¥ìœ¼ë¡œ ë°›ì•„ QRì½”ë“œë¥¼ ìƒì„±í•œë‹¤.
- QRì½”ë“œëŠ” ë°ì´í„°ë¥¼ íŠ¹ë³„í•œ ë°©ì‹ìœ¼ë¡œ ì¸ì½”ë”©í•˜ì—¬ í…ìŠ¤íŠ¸ ë˜ëŠ” URLë¡œ í‘œí˜„í•˜ëŠ” 2ì°¨ì› ë§¤íŠ¸ë¦­ìŠ¤ ë°”ì½”ë“œì´ë‹¤.
- **PDF ìƒì„±**: **`jsPDF`** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ˆ PDF ë¬¸ì„œë¥¼ ìƒì„±í•˜ê³ , **`doc.text()`** ë° **`doc.autoTable()`** í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œì— í…ìŠ¤íŠ¸ì™€ í‘œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ì¶”ê°€í•œ ì •ë³´ëŠ” PDF íŒŒì¼ë¡œ ì €ì¥í•˜ê±°ë‚˜ ë¸Œë¼ìš°ì €ì—ì„œ ë Œë”ë§í•  ìˆ˜ ìˆë‹¤ !

â†’ ì¦‰, ë¶€íŠ¸ìŠ¤íŠ¸ë© ì²˜ëŸ¼ í•˜ë‚˜ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ ë˜ëŠ” ë¬¸ë²•ì´ ìˆì–´ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

![image](https://github.com/solfany/Spring-board-project/assets/123814718/0f672f93-93fa-45ac-b7c3-2b6d4b0d488b)

### 3-3. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸(ê¸‰ì—¬ ì •ì‚°)ì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê¸°

```jsx
function Pdf({ userData }) {
  //ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ porpë¥¼ í†µí•´ ì „ë‹¬ ë°›ëŠ”ë‹¤.
  // ...

  // ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” í•¨ìˆ˜
  const generatePdf = async () => {
    const doc = new jsPDF();

    // userDataë¥¼ ì‚¬ìš©í•˜ì—¬ PDF ìƒì„±
    const headers = [
      ["ì´ë¦„", "ìƒë…„ì›”ì¼", "ì‚¬ì›ë²ˆí˜¸", "ë¶€ì„œëª…", "ì§ê¸‰", "ì£¼ì†Œ", "ì´ë©”ì¼"],
    ];
    const data = [
      [
        userData.empName,
        userData.birthDate,
        userData.empNum,
        userData.dept,
        userData.position,
        userData.address,
        userData.email,
      ],
    ];

    doc.autoTable({
      head: headers,
      body: data,
      startY: 50,
      // ...
    });

    // ë‚˜ë¨¸ì§€ PDF ìƒì„± ë¶€ë¶„

    doc.save("ê¸‰ì—¬ëª…ì„¸.pdf");
  };

  return (
    <div>
      <CButton onClick={generatePdf} size="sm">
        <CIcon icon={cilCloudDownload} />
      </CButton>
    </div>
  );
}
```

> ìœ„ì˜ ì½”ë“œì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ë¶€ë¶„ì€ **`Pdf`** ì»´í¬ë„ŒíŠ¸ì˜ **`userData`** propì„ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.
> PDFì— ë“¤ì–´ê°€ëŠ” ë°ì´í„°ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° ì „ë‹¬ ë°›ê²Œ ëœë‹¤.
> ì´ ë°ì´í„°ëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, ì´ ì •ë³´ë¥¼ í™œìš©í•˜ì—¬ PDF ë¬¸ì„œë¥¼ ìƒì„±í•œë‹¤.
>
> ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œ ì£¼ìš”í•œ ë¶€ë¶„ì€ **`generatePdf`** í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼
> PDFë¡œ ì¶œë ¥í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.
> **`userData`** ê°ì²´ ë‚´ì˜ í•„ë“œë“¤ì„ ì´ìš©í•˜ì—¬ í…Œì´ë¸” ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³ ,
> ìƒì„±ëœ ë°ì´í„°ë¥¼ PDFë¡œ ë³€í™˜í•˜ê³  ì €ì¥í•˜ëŠ” ì—­í• ì„ í•˜ê²Œëœë‹¤.
>
> ì´ ë¶€ë¶„ì€ **`userData`** ê°ì²´ì˜ ì†ì„±ì„ ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ê³ , ê·¸ ë°ì´í„°ë¥¼ PDFë¡œ í¬ë§·í•˜ì—¬ ì¶œë ¥í•˜ëŠ” ê²ƒìœ¼ë¡œ, ì‚¬ìš©ì ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì ì¸ PDFë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ì„ í•˜ê²Œëœë‹¤!

---

---

í•´ë‹¹ ì½”ë“œëŠ” **`PayManagementSystemManagement`**ë¼ëŠ” React ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ì˜í•˜ê³  ìˆìœ¼ë©°, ì£¼ìš” ê¸°ëŠ¥ë“¤ì€ ê¸‰ì—¬ ì •ë³´ì˜ í…Œì´ë¸” ë·°, ê¸‰ì—¬ ì§€ê¸‰ ë° ì·¨ì†Œ, PDF ë‹¤ìš´ë¡œë“œ ë“±ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ëŠ” ì½”ë“œ ë‚´ì—ì„œ ì£¼ìš” ê¸°ëŠ¥ì„ ì„¤ëª…í•˜ë©° ì£¼ì„ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```jsx
import React, { useState, useEffect } from "react";
// í•„ìš”í•œ UI ì»´í¬ë„ŒíŠ¸ë“¤ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
import { Table, Container, Row, Col, Button } from "reactstrap";
import GetThisMonth from "../TimeManagementSystem/CountWeekdays";
import Pdf from "./Pdf";
import { Pagination, message } from "antd";
import Cookies from "js-cookie";
import {
  CContainer,
  CTable,
  CTableBody,
  CTableHead,
  CTableHeaderCell,
  CTableRow,
  CTableDataCell,
} from "@coreui/react";

function PayManagementSystemManagement() {
  // ê°ì¢… ìƒíƒœê°’ë“¤ì„ ì •ì˜í•©ë‹ˆë‹¤.
  const [rows, setRows] = useState([]);
  const [users, setUsers] = useState([]);
  const [selectedRowIndex, setSelectedRowIndex] = useState(null);
  const staffInfo = JSON.parse(Cookies.get("staffInfo")); // ì¿ í‚¤ì—ì„œ staff ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œì ì— ì„œë²„ë¡œë¶€í„° ì‚¬ìš©ì(ì§ì›) ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
  useEffect(() => {
    fetch("/api/timeManagement")
      .then((response) => response.json())
      .then((data) => {
        setUsers(data);
      });
  }, []);

  // users ìƒíƒœê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ rows ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
  useEffect(() => {
    setRows(
      users.map((user) => [
        user.empNum,
        user.empName,
        0,
        user.vacation,
        user.actualWorkDays,
        user.workingHours,
        user.email,
        "no",
      ])
    );
  }, [users]);

  // í…Œì´ë¸”ì˜ ì»¬ëŸ¼ ì´ë¦„ì„ ì •ì˜í•©ë‹ˆë‹¤.
  const tableColumns = [
    // ... (ì´ì „ ì½”ë“œë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.)
  ];

  // ê¸‰ì—¬ ì§€ê¸‰ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œì˜ ë¡œì§ì…ë‹ˆë‹¤.
  const handlePayClick = (index) => {
    // ... (ì´ì „ ì½”ë“œë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.)
  };

  // ë¬´ì‘ìœ„ ë¬¸ìì—´ ìƒì„± ë¡œì§ì…ë‹ˆë‹¤.
  const randum = (max) => Math.floor(Math.random() * max);
  // ... (ì´ì „ ì½”ë“œë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.)

  // ì§€ê¸‰ ì™„ë£Œ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œì˜ ì•Œë¦¼ ë¡œì§ì…ë‹ˆë‹¤.
  const clickTobtn = () => {
    // ... (ì´ì „ ì½”ë“œë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.)
  };

  // í…Œì´ë¸”ì˜ íŠ¹ì • í–‰ì„ í´ë¦­í–ˆì„ ë•Œì˜ ë¡œì§ì…ë‹ˆë‹¤.
  const handleRowClick = (index) => {
    setSelectedRowIndex(index);
  };
  const someData = selectedRowIndex !== null ? users[selectedRowIndex] : null;

  return (
    <>
      <CContainer className="d-flex justify-content-around ">
        // ... (ì´ì „ ì½”ë“œë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.) // ê¸‰ì—¬ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í…Œì´ë¸” ë·°ë¥¼
        ë Œë”ë§í•©ë‹ˆë‹¤.
        <CTable striped bordered hover style={{ whiteSpace: "nowrap" }}>
          // ... (ì´ì „ ì½”ë“œë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.)
        </CTable>
        <Pagination />
      </CContainer>
    </>
  );
}

export default PayManagementSystemManagement;
```

ì´ ì½”ë“œëŠ” ì „ì²´ì ìœ¼ë¡œ Reactì˜ **`useState`**ì™€ **`useEffect`** í›…ì„ í™œìš©í•˜ì—¬ ê¸‰ì—¬ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤. í…Œì´ë¸”ì—ëŠ” ê° ì§ì›ì˜ ê¸‰ì—¬ ì •ë³´ê°€ ë‚˜íƒ€ë‚˜ë©°, ì§ì›ë³„ë¡œ ê¸‰ì—¬ ì§€ê¸‰ ë° ì·¨ì†Œ, PDF ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ì´ ì œê³µë©ë‹ˆë‹¤.

### **1. ìƒíƒœê°’ ì •ì˜ ë° ì´ˆê¸°í™”**

```jsx
javascriptCopy code
const [rows, setRows] = useState([]);
const [users, setUsers] = useState([]);
const [selectedRowIndex, setSelectedRowIndex] = useState(null);
const staffInfo = JSON.parse(Cookies.get("staffInfo")); // ì¿ í‚¤ì—ì„œ staff ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

```

### **2. ì‚¬ìš©ì(ì§ì›) ì •ë³´ ë¡œë”©**

ë°ì´í„°ëŠ” "/api/timeManagement" ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.

```jsx
// ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë Œë”ë§ë  ë•Œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
useEffect(() => {
  fetch("/api/timeManagement")
    .then((response) => response.json())
    .then((data) => {
      setUsers(data); // ì‚¬ìš©ì ì •ë³´ë¥¼ users ìƒíƒœê°’ì— ì €ì¥í•©ë‹ˆë‹¤.
    });
}, []);
```

### **3. ì‚¬ìš©ì ì •ë³´ë¥¼ í…Œì´ë¸” í–‰ ë°ì´í„°ë¡œ ë³€í™˜**

```jsx
// users ìƒíƒœê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ rows ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
useEffect(() => {
  setRows(
    users.map((user) => [
      user.empNum,
      user.empName,
      0,
      user.vacation,
      user.actualWorkDays,
      user.workingHours,
      user.email,
      "no",
    ])
  );
}, [users]);
```

### **4. ê¸‰ì—¬ ì§€ê¸‰ í™•ì¸ ë° ì·¨ì†Œ**

```jsx
// ê¸‰ì—¬ ì§€ê¸‰ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œì˜ ì•¡ì…˜ì…ë‹ˆë‹¤.
const handlePayClick = (index) => {
  const confirmed = window.confirm("ê²°ì œ ì™„ë£Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
  if (confirmed) {
    alert("ê²°ì œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
    const newRows = [...rows];
    newRows[index][7] = "yes";
    setRows(newRows);
  } else {
    alert("ì·¨ì†Œ ë˜ì—ˆìŠµë‹ˆë‹¤.");
  }
};
```

### **5. ë¬´ì‘ìœ„ ë¬¸ìì—´ ìƒì„±**

ê¸‰ì—¬ ì§€ê¸‰ í›„, ê´€ë¦¬ì ì½”ë“œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ë¡œì§ì…ë‹ˆë‹¤.

```jsx
const randum = (max) => Math.floor(Math.random() * max);
const numbers = "0123456789";
const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

let ran = "";
for (let i = 0; i < 4; i++) {
  ran += numbers[randum(numbers.length)] + letters[randum(letters.length)];
}
```

### **6. ì§€ê¸‰ ì™„ë£Œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸**

ê¸‰ì—¬ê°€ ì§€ê¸‰ë˜ë©´ ê´€ë¦¬ìì—ê²Œ ê²°ì œ ì •ë³´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

```jsx
const clickTobtn = () => {
  alert(`
    ê²°ì œì: ${staffInfo.empName}
    ê²°ì œ ì¼ì‹œ : ${new Date()}
    ê´€ë¦¬ì ì½”ë“œ: ${staffInfo.empNum}${ran}`);
};
```

### **7. íŠ¹ì • í–‰ í´ë¦­ ì´ë²¤íŠ¸**

```jsx
javascriptCopy code
// í…Œì´ë¸”ì˜ íŠ¹ì • í–‰ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ í–‰ì˜ ì¸ë±ìŠ¤ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
const handleRowClick = (index) => {
    setSelectedRowIndex(index);
};

```

### **8. UI ë Œë”ë§**

ì»´í¬ë„ŒíŠ¸ì˜ ë°˜í™˜ ë¶€ë¶„ì—ì„œ UIê°€ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ê³³ì—ëŠ” ì§ì›ì˜ ê¸‰ì—¬ ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” í…Œì´ë¸”, ê¸‰ì—¬ ì§€ê¸‰ ë° ì·¨ì†Œ ë²„íŠ¼, PDF ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ë“±ì˜ UI ìš”ì†Œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

ì½”ë“œëŠ” ì£¼ë¡œ "@coreui/react" ë° "reactstrap" ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ì—¬ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.

### **9. PDF ë‹¤ìš´ë¡œë“œ**

í…Œì´ë¸”ì˜ ê° í–‰ë§ˆë‹¤ PDF ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì´ ìˆìœ¼ë©°, í•´ë‹¹ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ **`Pdf`** ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

```jsx
javascriptCopy code
<Pdf userData={users[rowIndex]} />

```

ìœ„ì˜ ì½”ë“œë¡œ ê° ì‚¬ìš©ìì˜ ë°ì´í„°ë¥¼ PDF ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•˜ì—¬, í•´ë‹¹ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ í¬í•¨í•œ PDF íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

ì „ì²´ì ìœ¼ë¡œ ì´ ì»´í¬ë„ŒíŠ¸ëŠ” React í›…ì„ í™œìš©í•˜ì—¬ ì„œë²„ì—ì„œ ì§ì›ì˜ ê¸‰ì—¬ ì •ë³´ë¥¼ ê°€ì ¸ì™€ í…Œì´ë¸” í˜•íƒœë¡œ ë³´ì—¬ì£¼ê³ , ê¸‰ì—¬ ì§€ê¸‰ ë° ì·¨ì†Œ, PDF ë‹¤ìš´ë¡œë“œ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

---

## ê¸‰ì—¬ ì •ì‚° í˜ì´ì§€

- ì „ì²´ì½”ë“œ

  ```jsx
  import React, { useState } from "react";
  import {
    CButton,
    CModal,
    CModalHeader,
    CModalTitle,
    CModalBody,
    CCard,
    CCardBody,
    CCardHeader,
    CCol,
    CContainer,
    CBadge,
    CFormInput,
    CRow,
    CAlert,
    CCallout,
    CTableBody,
    CTableHead,
    CTableHeaderCell,
    CTableRow,
    CTableDataCell,
    CDropdownItem,
    CDropdownDivider,
    CFormSelect,
  } from "@coreui/react";
  function CountWeekdays() {
    const [year, setYear] = useState(new Date().getFullYear());
    const [month, setMonth] = useState(new Date().getMonth() + 1);
    const [weekdays, setWeekdays] = useState(0);
    const [workHours, setWorkHours] = useState(0); // ì´ ë¶€ë¶„ ì¶”ê°€

    const countWeekdaysInMonth = (year, month) => {
      let weekdays = 0;

      let date = new Date(year, month - 1, 1);
      let nextMonth = new Date(year, month, 1);

      while (date < nextMonth) {
        if (date.getDay() !== 0 && date.getDay() !== 6) {
          weekdays++;
        }
        date.setDate(date.getDate() + 1);
      }
      return weekdays;
    };

    const calculateWorkHours = (weekdays) => {
      // ì•„ë˜ì—ì„œ 8ì€ í•˜ë£¨ë‹¹ ê·¼ë¬´ ì‹œê°„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
      return weekdays * 8;
    };

    const handleSubmit = () => {
      const weekdaysCount = countWeekdaysInMonth(year, month);
      const workHours = calculateWorkHours(weekdaysCount);

      setWeekdays(weekdaysCount);
      setWorkHours(workHours);
    };

    // ... (ì´ì „ ì½”ë“œ ìƒëµ)

    return (
      <CContainer className="zz">
        <CRow>
          <CCol md={3}>
            <label>Year: </label>
            <CFormInput
              type="number"
              value={year}
              onChange={(e) => setYear(e.target.value)}
            />
          </CCol>
          <CCol md={3}>
            <label>Month: </label>
            <CFormInput
              type="number"
              value={month}
              onChange={(e) => {
                const newMonth = parseInt(e.target.value, 10);
                if (newMonth > 12) {
                  setMonth(1);
                  setYear(year + 1);
                } else if (newMonth < 1) {
                  setMonth(12);
                  setYear(year - 1);
                } else {
                  setMonth(newMonth);
                }
              }}
            />
          </CCol>

          <CCol md={2}>
            <br />
            <CButton onClick={handleSubmit}>Calculate Weekdays</CButton>
          </CCol>
        </CRow>
        <CCallout color="primary" className="zzzz">
          <CRow>
            <CCol md={3}>
              {year}ë…„ {month}ì›”ì˜ í‰ì¼ ìˆ˜: <b>{weekdays}</b>ì¼
            </CCol>
            <CCol md={2}>
              ì†Œì •ê·¼ë¡œì¼ìˆ˜: <b>{weekdays}</b>ì¼{" "}
            </CCol>
            <CCol md={2}>
              ì†Œì •ê·¼ë¡œì‹œê°„: <b>{workHours}</b>ì‹œê°„
            </CCol>
          </CRow>
        </CCallout>
      </CContainer>
    );
  }

  export default CountWeekdays;
  ```

![image](https://github.com/solfany/Spring-board-project/assets/123814718/6c261fe3-3f3d-4186-9df1-2fd39b2bf7e9)

---

### **CountWeekdays ì»´í¬ë„ŒíŠ¸ ì½”ë“œ ë¶„ì„:**

### 1. ìƒíƒœ(State) ì„¤ì •:

```jsx
javascriptCopy code
const [year, setYear] = useState(new Date().getFullYear());
const [month, setMonth] = useState(new Date().getMonth() + 1);
const [weekdays, setWeekdays] = useState(0);
const [workHours, setWorkHours] = useState(0);
```

- **year, setYear**: í˜„ì¬ ì—°ë„ë¥¼ ê¸°ë³¸ ê°’ìœ¼ë¡œ ê°€ì§€ëŠ” ìƒíƒœì…ë‹ˆë‹¤.
- **month, setMonth**: í˜„ì¬ ì›”ì„ ê¸°ë³¸ ê°’ìœ¼ë¡œ ê°€ì§€ëŠ” ìƒíƒœì…ë‹ˆë‹¤.
- **weekdays, setWeekdays**: í•´ë‹¹ ì›”ì˜ í‰ì¼ ìˆ˜ë¥¼ í‘œì‹œí•˜ëŠ” ìƒíƒœì…ë‹ˆë‹¤.
- **workHours, setWorkHours**: ì†Œì • ê·¼ë¡œ ì‹œê°„ì„ í‘œì‹œí•˜ëŠ” ìƒíƒœì…ë‹ˆë‹¤.

### 2. í•¨ìˆ˜:

```jsx
const countWeekdaysInMonth = (year, month) => {...}
```

- ì´ í•¨ìˆ˜ëŠ” ì£¼ì–´ì§„ ì—°ë„ì™€ ì›”ì— ëŒ€í•´ í•´ë‹¹ ì›”ì˜ í‰ì¼ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
- **`date.getDay()`**ë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ë‚ ì§œê°€ ì¼ìš”ì¼(0) ë˜ëŠ” í† ìš”ì¼(6)ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì£¼ë§ì´ ì•„ë‹ ê²½ìš° í‰ì¼ ìˆ˜ë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.

```jsx
const calculateWorkHours = (weekdays) => {...}
```

- í‰ì¼ ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ì•„ ì†Œì • ê·¼ë¡œ ì‹œê°„ì„ ê³„ì‚°í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” í•˜ë£¨ì˜ ê·¼ë¬´ ì‹œê°„ì„ 8ì‹œê°„ìœ¼ë¡œ ê°€ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤.

```jsx
const handleSubmit = () => {...}
```

- 'Calculate Weekdays' ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
- ìœ„ì˜ ë‘ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ í‰ì¼ ìˆ˜ì™€ ì†Œì • ê·¼ë¡œ ì‹œê°„ì„ ê³„ì‚°í•˜ê³ , ê·¸ ê°’ì„ ìƒíƒœì— ì €ì¥í•©ë‹ˆë‹¤.

### 3. UI ìš”ì†Œ:

1. ì—°ë„ ë° ì›” ì…ë ¥:
   - ì‚¬ìš©ìëŠ” ì—°ë„ì™€ ì›”ì„ ìˆ«ìë¡œ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   - ì›” ì…ë ¥ì— ë³€ê²½ì´ ë°œìƒí•˜ë©´ ë²”ìœ„ë¥¼ ê²€ì‚¬í•˜ì—¬ 1ë³´ë‹¤ ì‘ê±°ë‚˜ 12ë³´ë‹¤ í° ê°’ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```jsx
<CFormInput
  type="number"
  value={year}
  onChange={(e) => setYear(e.target.value)}
/>
```

1. 'Calculate Weekdays' ë²„íŠ¼:
   - ì´ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ **`handleSubmit`** í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.

```jsx
<CButton onClick={handleSubmit}>Calculate Weekdays</CButton>
```

1. ê²°ê³¼ ì¶œë ¥:

```jsx
javascriptCopy code
<CCallout color="primary" className="zzzz">
  <CRow>
    <CCol md={3}>
      {year}ë…„ {month}ì›”ì˜ í‰ì¼ ìˆ˜: <b>{weekdays}</b>ì¼
    </CCol>
    <CCol md={2}>
      ì†Œì •ê·¼ë¡œì¼ìˆ˜: <b>{weekdays}</b>ì¼
    </CCol>
    <CCol md={2}>
      ì†Œì •ê·¼ë¡œì‹œê°„: <b>{workHours}</b>ì‹œê°„
    </CCol>
  </CRow>
</CCallout>
```

- ê³„ì‚°ëœ í‰ì¼ ìˆ˜ì™€ ì†Œì • ê·¼ë¡œ ì‹œê°„ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

# back-end

- controller

  ```java
  package com.project.backend.controller.timeManagementSystem;

  import com.project.backend.entity.timeManagementSystem.TimeManagementSystem;
  import com.project.backend.service.timemanagement.TimeManagementService;
  import org.springframework.beans.factory.annotation.Autowired;
  import org.springframework.web.bind.annotation.GetMapping;
  import org.springframework.web.bind.annotation.RequestMapping;
  import org.springframework.web.bind.annotation.RestController;

  import java.util.List;

  @RestController
  @RequestMapping("/api")
  public class TimeManagementController {

    private final TimeManagementService timeManagementService;

    @Autowired
    public TimeManagementController(TimeManagementService timeManagementService) {
      this.timeManagementService = timeManagementService;
    }

    // ì—”ë“œí¬ì¸íŠ¸: ëª¨ë“  TimeManagementSystem ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
    @GetMapping("/timeManagement")
    public List<TimeManagementSystem> getAllTimeManagementData() {
      return timeManagementService.findAll();
    }

    // ì¶”ê°€ì ì¸ ì—”ë“œí¬ì¸íŠ¸ë‚˜ ë¡œì§ì€ í•„ìš”ì— ë”°ë¼ ì¶”ê°€í•©ë‹ˆë‹¤.
  }
  ```

- Dto

  ```java
  package com.project.backend.dto;

  import lombok.Getter;
  import lombok.Setter;

  import java.util.Date;

  @Getter
  @Setter
  public class TimeManagementDto {
      private Long id;
      private Long empNum;
      private String title;
      private String empName;
      private Date start;
      private Date end;
      private String description;

      public TimeManagementDto() {
          // ê¸°ë³¸ ìƒì„±ì
      }
  }
  ```

- entity

  ```java
  package com.project.backend.entity.timeManagementSystem;

  import com.project.backend.entity.Staff;
  import jakarta.persistence.*;

  import java.time.LocalDate;
  import java.time.YearMonth;

  @Entity
  public class ã…Š {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne
    @JoinColumn(name = "staff_id")
    private Staff staff;

    // ìœ ê¸‰íœ´ê°€ ì¼ìˆ˜
    private int vacation;

    // ì†Œì •ê·¼ë¡œì¼ìˆ˜
    private int workingDays;

    //ì‹¤ì œê·¼ë¡œì¼ìˆ˜
    private int actualWorkDays;

    //ì†Œì •ê·¼ë¡œì‹œê°„
    private int workingHours;

    //ìœ ê¸‰íœ´ê°€
    private int unpaid;

    //ë¬´ê¸‰íœ´ê°€
    private int paid;
    private Long empNum;

    private String empId;

    private String dept;

    private String position;

    private String empName;

    private String birthDate;

    private String phoneNumber;

    private String address;

    private String email;

  // ë‹¹ì›”ì˜ í‰ì¼ ì¼ìˆ˜ ê³„ì‚° ë©”ì„œë“œ
  public int calculateWeekdaysInMonth(int year, int month) {
    YearMonth yearMonth = YearMonth.of(year, month);
    LocalDate firstDayOfMonth = yearMonth.atDay(1);
    LocalDate lastDayOfMonth = yearMonth.atEndOfMonth();

    int weekdays = 0;
    LocalDate currentDate = firstDayOfMonth;

    while (!currentDate.isAfter(lastDayOfMonth)) {
      if (currentDate.getDayOfWeek().getValue() >= 1 && currentDate.getDayOfWeek().getValue() <= 5) {
        weekdays++;
      }
      currentDate = currentDate.plusDays(1);
    }

    return weekdays;
  }

    // ë‹¹ì›” í‰ì¼ì¼ìˆ˜ x 8ì„ ì†Œì •ê·¼ë¡œì‹œê°„ í•„ë“œì— ì„¤ì •í•˜ëŠ” ë©”ì„œë“œ
    public void updateWorkingHours() {
      int year = YearMonth.now().getYear();
      int month = YearMonth.now().getMonthValue();

      int weekdaysInMonth = calculateWeekdaysInMonth(year, month);
      this.workingHours = weekdaysInMonth * 8;
    }

    // ì´ˆê¸°í™” ë©”ì„œë“œì—ì„œ ê°’ì„ ê³„ì‚°í•˜ì—¬ í•„ë“œì— ì„¤ì •
    @PrePersist
    @PreUpdate
    public void initializeValues() {
      int year = YearMonth.now().getYear();
      int month = YearMonth.now().getMonthValue();

      int weekdaysInMonth = calculateWeekdaysInMonth(year, month);
      this.workingDays = weekdaysInMonth;
      this.actualWorkDays = weekdaysInMonth; // ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •

      updateWorkingHours(); // ì†Œì •ê·¼ë¡œì‹œê°„ ì—…ë°ì´íŠ¸
    }

  //  ===============================
    public Long getId() {
      return id;
    }

    public void setId(Long id) {
      this.id = id;
    }

    public Staff getStaff() {
      return staff;
    }

    public void setStaff(Staff staff) {
      this.staff = staff;
    }

    public int getVacation() {
      return vacation;
    }

    public void setVacation(int vacation) {
      this.vacation = vacation;
    }

    public int getWorkingDays() {
      return workingDays;
    }

    public void setWorkingDays(int workingDays) {
      this.workingDays = workingDays;
    }

    public int getActualWorkDays() {
      return actualWorkDays;
    }

    public void setActualWorkDays(int actualWorkDays) {
      this.actualWorkDays = actualWorkDays;
    }

    public int getWorkingHours() {
      return workingHours;
    }

    public void setWorkingHours(int workingHours) {
      this.workingHours = workingHours;
    }

    public Long getEmpNum() {
      return empNum;
    }

    public String getEmpId() {
      return empId;
    }

    public String getDept() {
      return dept;
    }

    public void setDept(String dept) {
      this.dept = dept;
    }

    public String getPosition() {
      return position;
    }

    public String getEmpName() {
      return empName;
    }

    public String getBirthDate() {
      return birthDate;
    }

    public String getPhoneNumber() {
      return phoneNumber;
    }

    public String getAddress() {
      return address;
    }

    public String getEmail() {
      return email;
    }

    public int getUnpaid() {
      return unpaid;
    }

    public void setUnpaid(int unpaid) {
      this.unpaid = unpaid;
    }

    public int getPaid() {
      return paid;
    }

    public void setPaid(int paid) {
      this.paid = paid;
    }

    public void setEmpNum(Long empNum) {
      this.empNum = empNum;
    }

    public void setEmpId(String empId) {
      this.empId = empId;
    }

    public void setPosition(String position) {
      this.position = position;
    }

    public void setEmpName(String empName) {
      this.empName = empName;
    }

    public void setBirthDate(String birthDate) {
      this.birthDate = birthDate;
    }

    public void setPhoneNumber(String phoneNumber) {
      this.phoneNumber = phoneNumber;
    }

    public void setAddress(String address) {
      this.address = address;
    }

    public void setEmail(String email) {
      this.email = email;
    }
  }
  ```

- repository

  ```java
  package com.project.backend.repository;

  import com.project.backend.entity.Staff;
  import com.project.backend.entity.timeManagementSystem.TimeManagementSystem;
  import org.springframework.data.jpa.repository.JpaRepository;
  import org.springframework.stereotype.Repository;

  @Repository
  public interface TimeManagementRepository extends JpaRepository<TimeManagementSystem, Long> {
    // í•„ìš”í•œ ì¶”ê°€ ì¿¼ë¦¬ ë©”ì„œë“œë“¤ì„ ì—¬ê¸°ì— ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    // ì˜ˆë¥¼ ë“¤ì–´, ì´ë¦„ìœ¼ë¡œ TimeManagementSystem ë°ì´í„°ë¥¼ ì°¾ëŠ” ë©”ì„œë“œëŠ” ì•„ë˜ì™€ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    // List<TimeManagementSystem> findByEmpName(String empName);
    void deleteByStaff(Staff staff);

  }
  ```

- service
